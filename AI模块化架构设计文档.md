# AI æ¨¡å—åŒ–æ¶æ„è®¾è®¡æ–‡æ¡£

## ä¸€ã€æ ¸å¿ƒç†å¿µ

ç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€è¾“å…¥éœ€æ±‚ï¼ŒAI ä¸€æ¬¡æ€§åˆ†æå¹¶è¿”å›å®Œæ•´çš„æ‰§è¡Œè®¡åˆ’ï¼ŒåŒ…æ‹¬ï¼š
- éœ€è¦å±•ç¤ºå“ªäº›æ¨¡å—ï¼ˆåŠŸèƒ½å¡ç‰‡ï¼‰
- æ¯ä¸ªæ¨¡å—çš„ä¼˜å…ˆçº§ã€åˆå§‹çŠ¶æ€ã€å±•ç¤ºæ ·å¼
- æ¯ä¸ªæ¨¡å—éœ€è¦è°ƒç”¨çš„ API åŠå‚æ•°
- ç”¨æˆ·äº¤äº’æ—¶çš„ API æ˜ å°„è§„åˆ™
- é¡µé¢çš„æ•´ä½“å¸ƒå±€æ–¹å¼å’Œä¸»é¢˜é£æ ¼

å‰ç«¯æ ¹æ®æ‰§è¡Œè®¡åˆ’æ¸²æŸ“å¡ç‰‡ï¼Œç”¨æˆ·äº¤äº’æ—¶ç›´æ¥æŸ¥æ‰¾é¢„é…ç½®çš„ API æ˜ å°„ï¼Œæ— éœ€å†æ¬¡è¯¢é—® AIã€‚

**AI çš„å®Œå…¨æ§åˆ¶æƒï¼š** AI ä¸ä»…å†³å®šå±•ç¤ºä»€ä¹ˆå†…å®¹ï¼Œè¿˜å†³å®šå¦‚ä½•å±•ç¤ºï¼ˆæ ·å¼ã€å¸ƒå±€ã€ä¸»é¢˜ï¼‰ï¼Œå®ç°çœŸæ­£çš„æ™ºèƒ½åŒ–ç•Œé¢ç”Ÿæˆã€‚

---

## äºŒã€å¿«é€Ÿå¼€å§‹ï¼ˆæœ€å°å¯è¿è¡Œ Demoï¼‰

### 2.1 æŠ€æœ¯æ ˆ

**å‰ç«¯ï¼š**
- React 18 + TypeScript
- Viteï¼ˆå¿«é€Ÿæ„å»ºï¼‰
- Tailwind CSSï¼ˆæ ·å¼ï¼‰
- Zustandï¼ˆè½»é‡çŠ¶æ€ç®¡ç†ï¼‰

**åç«¯ï¼š**
- Node.js + Express + TypeScript
- çœŸå® AIï¼šCerebras APIï¼ˆå·²æä¾›ï¼‰
- ä¸šåŠ¡ APIï¼šå…¨éƒ¨ Mockï¼ˆJSON æ–‡ä»¶ï¼‰

### 2.2 AI æ¨¡å‹é€‰æ‹©

é¦–å…ˆè·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨å¹¶é€‰æ‹©æœ€åˆé€‚çš„ï¼š

```bash
curl --location --request GET 'https://cerebras-proxy.brain.loocaa.com:1443/v1/models' \
--header 'Authorization: Bearer DlJYSkMVj1x4zoe8jZnjvxfHG6z5yGxK'
```

**æ¨èæ¨¡å‹é€‰æ‹©ç­–ç•¥ï¼š**
1. å¦‚æœæœ‰ `qwen-3-235b` ç³»åˆ— â†’ é€‰æ‹©å®ƒï¼ˆæ¨ç†èƒ½åŠ›å¼ºï¼Œæ”¯æŒä¸­æ–‡ï¼‰
2. å¦‚æœæœ‰ `llama-3` ç³»åˆ— â†’ æ¬¡é€‰ï¼ˆæ€§èƒ½å¥½ï¼‰
3. å…¶ä»– â†’ é€‰æ‹© token é™åˆ¶æœ€å¤§çš„

**é…ç½®æ–‡ä»¶ï¼š**
```typescript
// server/config/ai.config.ts
export const aiConfig = {
  baseURL: 'https://cerebras-proxy.brain.loocaa.com:1443/v1',
  apiKey: 'DlJYSkMVj1x4zoe8jZnjvxfHG6z5yGxK',
  model: 'qwen-3-235b-a22b-instruct-2507',  // æ ¹æ®å®é™…å¯ç”¨æ¨¡å‹è°ƒæ•´
  temperature: 0.7,
  maxTokens: 2000
};
```

### 2.3 æ¶æ„è¯´æ˜

**æ ¸å¿ƒæµç¨‹ï¼š**
```
ç”¨æˆ·è¾“å…¥ 
  â†’ å‰ç«¯è°ƒç”¨ POST /api/ai/generate-plan
  â†’ åç«¯ Cerebras AI åˆ†æ
  â†’ åç«¯å¹¶è¡Œè°ƒç”¨ä¸šåŠ¡ APIï¼ˆå¦‚ POST /api/flights/searchï¼‰
  â†’ ä¸šåŠ¡ API è¿”å› Mock æ•°æ®
  â†’ è¿”å›å®Œæ•´æ¸²æŸ“æ•°æ®ç»™å‰ç«¯
  â†’ å‰ç«¯æ¸²æŸ“å¡ç‰‡

ç”¨æˆ·äº¤äº’ï¼ˆç‚¹å‡»èˆªç­æŸ¥çœ‹è¯¦æƒ…ï¼‰
  â†’ å‰ç«¯è°ƒç”¨ POST /api/flights/detail
  â†’ åç«¯è¿”å› Mock æ•°æ®
  â†’ å‰ç«¯æ›´æ–°ç•Œé¢
```

**å…³é”®ç‚¹ï¼š**
- âœ… AI æœåŠ¡ï¼šçœŸå®çš„ Cerebras API
- âœ… ä¸šåŠ¡ APIï¼šæœ‰å®Œæ•´çš„ HTTP æ¥å£ï¼ˆPOST /api/flights/search ç­‰ï¼‰
- âœ… Mock å®ç°ï¼šåç«¯æ¥å£è¿”å› Mock æ•°æ®ï¼ˆè€Œä¸æ˜¯è°ƒç”¨çœŸå®æ•°æ®åº“ï¼‰
- âœ… å‰ç«¯ï¼šæ­£å¸¸è°ƒç”¨ HTTP æ¥å£ï¼Œä¸çŸ¥é“åç«¯è¿”å›çš„æ˜¯ Mock è¿˜æ˜¯çœŸå®æ•°æ®

**æ‰©å±•åˆ°ç”Ÿäº§ï¼š**
åªéœ€ä¿®æ”¹ä¸šåŠ¡ API çš„å®ç°ï¼Œä»è¿”å› Mock æ•°æ®æ”¹ä¸ºæŸ¥è¯¢æ•°æ®åº“/è°ƒç”¨ç¬¬ä¸‰æ–¹ APIï¼Œå‰ç«¯æ— éœ€ä»»ä½•æ”¹åŠ¨ã€‚

### 2.4 æœ€å°ç›®å½•ç»“æ„

```
ai-modular-demo/
â”œâ”€â”€ src/                           # å‰ç«¯
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ components/ModuleRenderer.tsx
â”‚   â””â”€â”€ api/client.ts
â”‚
â””â”€â”€ server/                        # åç«¯
    â”œâ”€â”€ index.ts
    â”œâ”€â”€ config/ai.config.ts
    â”œâ”€â”€ ai/
    â”‚   â”œâ”€â”€ cerebras-client.ts
    â”‚   â””â”€â”€ prompt-builder.ts
    â”œâ”€â”€ modules/registry.json      # 3ä¸ªç¤ºä¾‹æ¨¡å—å®šä¹‰
    â”œâ”€â”€ mock-data/                 # Mock æ•°æ®æ–‡ä»¶
    â”‚   â”œâ”€â”€ flights.json
    â”‚   â”œâ”€â”€ hotels.json
    â”‚   â””â”€â”€ weather.json
    â””â”€â”€ routes/
        â”œâ”€â”€ ai.route.ts            # AI è·¯ç”±
        â””â”€â”€ api.route.ts           # ä¸šåŠ¡ API è·¯ç”±ï¼ˆè¿”å› Mock æ•°æ®ï¼‰
```

### 2.5 æ ¸å¿ƒå®ç°è¦ç‚¹

#### 1. æ¨¡å—æ³¨å†Œè¡¨ï¼ˆ3ä¸ªç¤ºä¾‹æ¨¡å—ï¼‰

å®šä¹‰ 3 ä¸ªç¤ºä¾‹æ¨¡å—ï¼ˆæœºç¥¨ã€é…’åº—ã€å¤©æ°”ï¼‰ï¼Œæ¯ä¸ªæ¨¡å—åŒ…å«ï¼šå¸ƒå±€é€‰é¡¹ã€æ ·å¼é€‰é¡¹ã€å‚æ•°å®šä¹‰ã€å…³è”çš„ API ç«¯ç‚¹ã€‚

#### 2. Cerebras AI é›†æˆ

**æ ¸å¿ƒé€»è¾‘ï¼š**
- æ„å»ºåŒ…å«æ‰€æœ‰æ¨¡å—ä¿¡æ¯çš„ System Prompt
- ç”¨æˆ·è¾“å…¥ä½œä¸º User Message
- è°ƒç”¨ Cerebras API è·å– AI å†³ç­–ï¼ˆJSON æ ¼å¼çš„æ‰§è¡Œè®¡åˆ’ï¼‰
- è§£æ AI è¿”å›çš„æ¨¡å—é€‰æ‹©å’Œæ ·å¼å†³ç­–

#### 3. ä¸šåŠ¡ API å®ç°ï¼ˆMockï¼‰

**å…³é”®æ¥å£ï¼š**
```
POST /api/flights/search      â†’ è¿”å› Mock èˆªç­æ•°æ®
POST /api/flights/detail      â†’ è¿”å› Mock èˆªç­è¯¦æƒ…
POST /api/hotels/search       â†’ è¿”å› Mock é…’åº—æ•°æ®
POST /api/weather/query       â†’ è¿”å› Mock å¤©æ°”æ•°æ®
```

**Mock å®ç°è¦ç‚¹ï¼š**
- æ¯ä¸ªæ¥å£æœ‰å®Œæ•´çš„è·¯ç”±å®šä¹‰
- æ¥æ”¶å‰ç«¯ä¼ æ¥çš„å‚æ•°ï¼ˆfrom, to, date ç­‰ï¼‰
- æ ¹æ®å‚æ•°ä» Mock æ•°æ®æ–‡ä»¶ä¸­åŒ¹é…è¿”å›æ•°æ®
- æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿï¼ˆ300msï¼‰

#### 4. AI è·¯ç”±æ ¸å¿ƒæµç¨‹

```typescript
// POST /api/ai/generate-plan
1. æ¥æ”¶ç”¨æˆ·è¾“å…¥
2. æ„å»º Promptï¼ˆåŒ…å«æ‰€æœ‰æ¨¡å—å®šä¹‰å’Œæ ·å¼å†³ç­–è§„åˆ™ï¼‰
3. è°ƒç”¨ Cerebras AI
4. è§£æ AI è¿”å›çš„æ‰§è¡Œè®¡åˆ’ï¼ˆJSONï¼‰
5. å¹¶è¡Œè°ƒç”¨ä¸šåŠ¡ APIï¼ˆå¦‚ POST /api/flights/searchï¼‰è·å–æ•°æ®
6. è¿”å›å®Œæ•´æ¸²æŸ“æ•°æ®ç»™å‰ç«¯
```

#### 5. å‰ç«¯æ¸²æŸ“

**æ ¸å¿ƒé€»è¾‘ï¼š**
- ç”¨æˆ·è¾“å…¥ â†’ è°ƒç”¨ `POST /api/ai/generate-plan`
- æ”¶åˆ°æ‰§è¡Œè®¡åˆ’å’Œæ•°æ®
- æŒ‰ä¼˜å…ˆçº§æ’åºæ¨¡å—
- æ ¹æ® `defaultExpanded` å†³å®šå±•å¼€/æŠ˜å 
- æ ¹æ® `style` é…ç½®åº”ç”¨æ ·å¼
- æ¸²æŸ“å¯¹åº”çš„æ¨¡å—ç»„ä»¶

### 2.6 å¿«é€Ÿè¿è¡Œ

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. å¯åŠ¨ï¼ˆå‰ç«¯+åç«¯ï¼‰
npm run dev

# 3. è®¿é—®
http://localhost:5173
```

**æµ‹è¯•ç”¨ä¾‹ï¼š**
1. "å¸®æˆ‘æ‰¾æ˜å¤©åŒ—äº¬åˆ°ä¸Šæµ·çš„æœºç¥¨" â†’ æœºç¥¨æ¨¡å—ï¼Œå±•å¼€ï¼Œè¯¦ç»†å¸ƒå±€
2. "å¿«é€Ÿçœ‹ä¸€ä¸‹ä¸Šæµ·çš„é…’åº—å’Œå¤©æ°”" â†’ 2ä¸ªæ¨¡å—ï¼Œç´§å‡‘å¸ƒå±€
3. "è¯¦ç»†å¯¹æ¯”åŒ—äº¬åˆ°ä¸Šæµ·çš„èˆªç­" â†’ è¯¦ç»†å¸ƒå±€ï¼Œèˆ’é€‚å¯†åº¦

### 2.7 æ‰©å±•åˆ°ç”Ÿäº§

**æ·»åŠ æ–°æ¨¡å—ï¼š** registry.json æ·»åŠ å®šä¹‰ â†’ å®ç°ä¸šåŠ¡ API â†’ å‰ç«¯æ·»åŠ  UI ç»„ä»¶

**æ¥å…¥çœŸå® APIï¼š** ä¿®æ”¹ä¸šåŠ¡ API è·¯ç”±çš„å®ç°ï¼Œä»è¿”å› Mock æ•°æ®æ”¹ä¸ºæŸ¥è¯¢æ•°æ®åº“/è°ƒç”¨ç¬¬ä¸‰æ–¹ API

**æ·»åŠ å‘é‡æ£€ç´¢ï¼š** é›†æˆ Chroma/Pineconeï¼Œæ›¿æ¢æ¨¡å—åˆ—è¡¨ä¸ºå‘é‡æ£€ç´¢

**æ€§èƒ½ä¼˜åŒ–ï¼š** æ·»åŠ  Redis ç¼“å­˜ã€é™æµã€æ—¥å¿—ç›‘æ§

---

## ä¸‰ã€é¡µé¢å¸ƒå±€ç³»ç»Ÿï¼ˆæ¨ªå‘æ»‘åŠ¨å¡ç‰‡ï¼‰

### 3.1 æ ¸å¿ƒå¸ƒå±€ç†å¿µ

**å¡ç‰‡çºµå‘æ’åˆ— + å¡ç‰‡å†…å®¹æ¨ªå‘æ»‘åŠ¨**

æ¯ä¸ªåŠŸèƒ½æ¨¡å—ä»¥**å¡ç‰‡**å½¢å¼å‘ˆç°ï¼Œä¸åŒç±»å‹çš„å¡ç‰‡ä»ä¸Šåˆ°ä¸‹çºµå‘æ’åˆ—ã€‚æ¯ä¸ªå¡ç‰‡å†…éƒ¨çš„å¤šä¸ªé€‰é¡¹ï¼ˆå¦‚å¤šä¸ªèˆªç­ã€å¤šä¸ªé…’åº—ï¼‰é‡‡ç”¨æ¨ªå‘æ»‘åŠ¨å±•ç¤ºã€‚

### 3.2 æ¨ªå‘æ»‘åŠ¨æœºåˆ¶

**æ ¸å¿ƒç‰¹ç‚¹ï¼š**
- **å½“å‰é¡¹ï¼ˆCurrent Itemï¼‰**ï¼šå®Œæ•´å±•ç¤ºï¼ŒåŒ…å«æ‰€æœ‰ä¿¡æ¯ï¼ˆå›¾ç‰‡ã€æ ‡é¢˜ã€ä»·æ ¼ã€è¯¦æƒ…ç­‰ï¼‰
- **å¾…çœ‹é¡¹ï¼ˆPreview Itemï¼‰**ï¼šç®€ç•¥å±•ç¤ºï¼Œä»…åŒ…å«å…³é”®ä¿¡æ¯ï¼ˆæ ‡é¢˜ã€ä»·æ ¼ã€ç¼©ç•¥å›¾ï¼‰
- **å±å¹•å æ¯”**ï¼šå½“å‰é¡¹ + å¾…çœ‹é¡¹çš„æ€»å®½åº¦ = 100vwï¼ˆåˆšå¥½å æ»¡ä¸€å±å®½åº¦ï¼‰
- **æ»‘åŠ¨äº¤äº’**ï¼šå‘å·¦æ»‘åŠ¨æ—¶ï¼Œå¾…çœ‹é¡¹å˜æˆå½“å‰é¡¹ï¼Œå½“å‰é¡¹å·¦æ»‘éšè—ï¼Œä¸‹ä¸€ä¸ªé¡¹å‡ºç°æˆä¸ºæ–°çš„å¾…çœ‹é¡¹

**ç¤ºæ„å›¾ï¼š**
```
å±å¹•å®½åº¦ 100vw
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  å½“å‰é¡¹       â”‚ â”‚å¾…çœ‹é¡¹â”‚                  â”‚
â”‚  â”‚  Air China   â”‚ â”‚China â”‚                  â”‚
â”‚  â”‚  CA1233      â”‚ â”‚MU518 â”‚                  â”‚
â”‚  â”‚  09:00-11:30 â”‚ â”‚Â¥1200 â”‚                  â”‚
â”‚  â”‚  Â¥1500       â”‚ â”‚      â”‚ â† ä¸‹ä¸€é¡¹ï¼ˆéšè—ï¼‰  â”‚
â”‚  â”‚  [è¯¦æƒ…] [é¢„è®¢]â”‚ â”‚      â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†‘                â†‘
   70% å®½åº¦         30% å®½åº¦

å‘å·¦æ»‘åŠ¨åï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  å½“å‰é¡¹       â”‚ â”‚å¾…çœ‹é¡¹â”‚                  â”‚
â”‚  â”‚  China       â”‚ â”‚Saver â”‚                  â”‚
â”‚  â”‚  Eastern     â”‚ â”‚      â”‚                  â”‚
â”‚  â”‚  MU5183      â”‚ â”‚      â”‚                  â”‚
â”‚  â”‚  Â¥1200       â”‚ â”‚      â”‚ â† ä¸‹ä¸€é¡¹          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 å¡ç‰‡çºµå‘æ’åˆ—è§„åˆ™

**å¸ƒå±€ç¤ºæ„ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœºç¥¨å¡ç‰‡ï¼ˆä¼˜å…ˆçº§1ï¼‰            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”           â”‚
â”‚  â”‚ CA1233   â”‚ â”‚MU5 â”‚ â†’ æ¨ªå‘æ»‘åŠ¨ â”‚
â”‚  â”‚ Â¥1500    â”‚ â”‚Â¥12 â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é…’åº—å¡ç‰‡ï¼ˆä¼˜å…ˆçº§2ï¼‰            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Hilton   â”‚ â”‚Dis â”‚ â†’ æ¨ªå‘æ»‘åŠ¨ â”‚
â”‚  â”‚ Â¥800/æ™š  â”‚ â”‚Â¥29 â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¤å…å¡ç‰‡ï¼ˆä¼˜å…ˆçº§3ï¼‰            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”           â”‚
â”‚  â”‚ é¤å…A    â”‚ â”‚é¤B â”‚ â†’ æ¨ªå‘æ»‘åŠ¨ â”‚
â”‚  â”‚ â­4.9    â”‚ â”‚â­4 â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ’åˆ—åŸåˆ™ï¼š**
- ä¸åŒç±»å‹çš„å¡ç‰‡ä»ä¸Šåˆ°ä¸‹çºµå‘æ’åˆ—
- æŒ‰ä¼˜å…ˆçº§ä»ä¸Šåˆ°ä¸‹æ’åˆ—
- æ¯ä¸ªå¡ç‰‡å†…éƒ¨çš„é€‰é¡¹æ¨ªå‘æ»‘åŠ¨å±•ç¤º
- é»˜è®¤åªæ˜¾ç¤ºå½“å‰é¡¹ï¼ˆå®Œæ•´ï¼‰+ å¾…çœ‹é¡¹ï¼ˆç®€ç•¥ï¼‰
- ç”¨æˆ·å¯ä»¥å·¦å³æ»‘åŠ¨æŸ¥çœ‹æ›´å¤šé€‰é¡¹

### 3.4 å››ç§å¡ç‰‡å¸ƒå±€ç±»å‹

æ ¹æ®UIå¸ƒå±€ç›¸ä¼¼æ€§ï¼Œç³»ç»Ÿæ”¯æŒä»¥ä¸‹å››ç§å¡ç‰‡ç±»å‹ï¼š

#### 1. æ¨ªå‘æ»‘åŠ¨åˆ—è¡¨å¡ç‰‡ï¼ˆHorizontal Scrollable List Cardï¼‰

**é€‚ç”¨æ¨¡å—ï¼š** Flightï¼ˆèˆªç­ï¼‰ã€Shoppingï¼ˆå•†å“ï¼‰ã€Yelpï¼ˆé¤å…ï¼‰ã€Videosï¼ˆè§†é¢‘ï¼‰ã€Imagesï¼ˆå›¾ç‰‡ï¼‰

**å½“å‰é¡¹æ˜¾ç¤ºï¼š**
- å®Œæ•´å›¾ç‰‡/logo
- ä¸»æ ‡é¢˜ï¼ˆèˆªç­å·/å•†å“å/é¤å…åï¼‰
- å‰¯æ ‡é¢˜ï¼ˆæ—¶é—´/æè¿°/åœ°å€ï¼‰
- ä»·æ ¼/è¯„åˆ†
- è¯¦ç»†ä¿¡æ¯
- æ“ä½œæŒ‰é’®ï¼ˆé¢„è®¢/è´­ä¹°/æŸ¥çœ‹è¯¦æƒ…ï¼‰

**å¾…çœ‹é¡¹æ˜¾ç¤ºï¼š**
- ç¼©ç•¥å›¾/å°å›¾æ ‡
- ä¸»æ ‡é¢˜ï¼ˆå¯èƒ½æˆªæ–­ï¼‰
- å…³é”®ä¿¡æ¯ï¼ˆä»·æ ¼/è¯„åˆ†ï¼‰

**ç¤ºä¾‹ - èˆªç­å¡ç‰‡ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœˆï¸ Air China     â”‚ â”‚China   â”‚
â”‚ CA1233           â”‚ â”‚Eastern â”‚
â”‚ 09:00 â†’ 11:30    â”‚ â”‚Â¥1200   â”‚
â”‚ Beijing-Shanghai â”‚ â”‚        â”‚
â”‚ 2h 30m           â”‚ â”‚        â”‚
â”‚ Â¥1500            â”‚ â”‚        â”‚
â”‚ [è¯¦æƒ…] [é¢„è®¢]     â”‚ â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. ä¿¡æ¯å±•ç¤ºå¡ç‰‡ï¼ˆInfo Display Cardï¼‰

**é€‚ç”¨æ¨¡å—ï¼š** InfoCardï¼ˆä¿¡æ¯æœç´¢ï¼‰

**å½“å‰é¡¹æ˜¾ç¤ºï¼š**
- å®Œæ•´æ ‡é¢˜
- æ‘˜è¦å†…å®¹
- æ¥æº/å‘å¸ƒæ—¶é—´
- ç›¸å…³é“¾æ¥

**å¾…çœ‹é¡¹æ˜¾ç¤ºï¼š**
- ç®€ç•¥æ ‡é¢˜
- æ¥æº

**ç¤ºä¾‹ - ä¿¡æ¯å¡ç‰‡ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“° æ–°é—»æ ‡é¢˜       â”‚ â”‚è´¢ç»   â”‚
â”‚ æ‘˜è¦å†…å®¹æ‘˜è¦å†…å®¹  â”‚ â”‚æ–°é—»   â”‚
â”‚ å†…å®¹å†…å®¹å†…å®¹å†…å®¹  â”‚ â”‚æ ‡é¢˜   â”‚
â”‚ æ¥æºï¼šXXX        â”‚ â”‚        â”‚
â”‚ 2å°æ—¶å‰          â”‚ â”‚        â”‚
â”‚ [æŸ¥çœ‹è¯¦æƒ…]        â”‚ â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. äº¤äº’æ“ä½œå¡ç‰‡ï¼ˆInteractive Action Cardï¼‰

**é€‚ç”¨æ¨¡å—ï¼š** LineGeneralAgentï¼ˆèŠå¤©ï¼‰ã€GeneralAgentï¼ˆåº”ç”¨æ§åˆ¶ï¼‰ã€OrchestrationAgentï¼ˆå¤šæ­¥éª¤ï¼‰

**å½“å‰é¡¹æ˜¾ç¤ºï¼š**
- æ“ä½œå›¾æ ‡/å¤´åƒ
- æ“ä½œåç§°/è”ç³»äºº
- æ“ä½œæè¿°/æœ€åæ¶ˆæ¯
- æ‰§è¡ŒæŒ‰é’®/è¾“å…¥æ¡†

**å¾…çœ‹é¡¹æ˜¾ç¤ºï¼š**
- å›¾æ ‡/å¤´åƒ
- åç§°ï¼ˆæˆªæ–­ï¼‰

**ç¤ºä¾‹ - èŠå¤©å¡ç‰‡ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ å¼ ä¸‰           â”‚ â”‚æå››    â”‚
â”‚ æœ€åæ¶ˆæ¯ï¼šä»Šå¤©    â”‚ â”‚        â”‚
â”‚ æœ‰ç©ºå—ï¼Ÿ          â”‚ â”‚        â”‚
â”‚ [è¾“å…¥æ¶ˆæ¯]        â”‚ â”‚        â”‚
â”‚ [å‘é€]            â”‚ â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4. åœ°å›¾è§†å›¾å¡ç‰‡ï¼ˆMap View Cardï¼‰

**é€‚ç”¨æ¨¡å—ï¼š** MeetingViewï¼ˆä¼šé¢åœ°ç‚¹ï¼‰

**å½“å‰é¡¹æ˜¾ç¤ºï¼š**
- åœ°å›¾åŒºåŸŸ
- åœ°ç‚¹åç§°
- åœ°å€
- è·ç¦»
- äº¤é€šæ–¹å¼
- å¯¼èˆªæŒ‰é’®

**å¾…çœ‹é¡¹æ˜¾ç¤ºï¼š**
- å°åœ°å›¾ç¼©ç•¥å›¾
- åœ°ç‚¹åç§°
- è·ç¦»

**ç¤ºä¾‹ - åœ°å›¾å¡ç‰‡ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ—ºï¸ [åœ°å›¾]        â”‚ â”‚[åœ°å›¾]  â”‚
â”‚ æ˜Ÿå·´å…‹ï¼ˆä¸­å…³æ‘ï¼‰  â”‚ â”‚éº¦å½“åŠ³  â”‚
â”‚ åŒ—äº¬å¸‚æµ·æ·€åŒº...   â”‚ â”‚2.5km   â”‚
â”‚ è·ç¦»ï¼š1.2km      â”‚ â”‚        â”‚
â”‚ ğŸš¶ 15åˆ†é’Ÿ         â”‚ â”‚        â”‚
â”‚ [å¯¼èˆª]            â”‚ â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€åŒå±‚æ¶æ„è®¾è®¡

### 3.1 æ£€ç´¢åˆ†å±‚ï¼ˆå‡å°‘ AI ä¸Šä¸‹æ–‡ï¼‰

**ç›®çš„ï¼š** å½“ç³»ç»Ÿæœ‰å¤§é‡æ¨¡å—æ—¶ï¼Œé¿å…ä¸€æ¬¡æ€§å°†æ‰€æœ‰æ¨¡å—å®šä¹‰å‘é€ç»™ AI

**è®¾è®¡ç†å¿µï¼š** AI ç›´æ¥ä»æ‰€æœ‰æ¨¡å—ä¸­æ™ºèƒ½æ£€ç´¢ï¼Œæ— éœ€äººä¸ºåˆ†ç±»ã€‚ç³»ç»Ÿåªæä¾›æ£€ç´¢æœºåˆ¶ï¼ŒAI è‡ªä¸»å†³ç­–é€‰æ‹©å“ªäº›æ¨¡å—ã€‚

**åˆ†å±‚ç»“æ„ï¼š**

```
ç¬¬1å±‚ï¼šæ‰€æœ‰æ¨¡å—çš„æ‘˜è¦ç´¢å¼•ï¼ˆå‘é‡æ•°æ®åº“ï¼‰
â”œâ”€ flight_search: æœºç¥¨æœç´¢å’Œé¢„è®¢
â”œâ”€ hotel_search: é…’åº—æœç´¢å’Œé¢„è®¢
â”œâ”€ product_search: å•†å“æœç´¢å’Œè´­ç‰©
â”œâ”€ weather_info: å¤©æ°”ä¿¡æ¯æŸ¥è¯¢
â”œâ”€ map_navigation: åœ°å›¾å¯¼èˆª
â”œâ”€ payment: æ”¯ä»˜åŠŸèƒ½
â””â”€ ... æ›´å¤šæ¨¡å—

ç¬¬2å±‚ï¼šå…·ä½“æ¨¡å—è¯¦ç»†å®šä¹‰ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰
flight_search/
â”œâ”€ å‚æ•°å®šä¹‰ï¼šdeparture, destination, date
â”œâ”€ å¯ç”¨APIï¼šsearch, detail, book
â”œâ”€ äº¤äº’èƒ½åŠ›ï¼šç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ã€ç‚¹å‡»é¢„è®¢
â”œâ”€ å¸ƒå±€é€‰é¡¹ï¼šlist-detailï¼ˆæ¨èï¼‰ã€compact-listã€grid
â””â”€ æ ·å¼é€‰é¡¹ï¼šä¸»é¢˜è‰²ã€å¡ç‰‡æ ·å¼ç­‰

ç¬¬3å±‚ï¼šAPI è¯¦ç»†å®šä¹‰ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰
flights/search/
â”œâ”€ è¯·æ±‚å‚æ•°
â”œâ”€ è¿”å›æ ¼å¼
â””â”€ è°ƒç”¨ç¤ºä¾‹
```

**å·¥ä½œæµç¨‹ï¼š**
1. ç”¨æˆ·è¾“å…¥ï¼š"è®¢æ˜å¤©åŒ—äº¬åˆ°ä¸Šæµ·çš„æœºç¥¨"
2. å‘é‡æ£€ç´¢ç›´æ¥ä»æ‰€æœ‰æ¨¡å—ä¸­æ‰¾åˆ°æœ€ç›¸å…³çš„ 3-5 ä¸ªæ¨¡å—æ‘˜è¦
3. AI ä»æ£€ç´¢ç»“æœä¸­é€‰æ‹©ï¼šflight_searchï¼ˆå¯èƒ½è¿˜é€‰æ‹© weather_infoã€hotel_searchï¼‰
4. æŒ‰éœ€åŠ è½½é€‰ä¸­æ¨¡å—çš„è¯¦ç»†å®šä¹‰
5. AI ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ï¼ˆåŒ…å«æ ·å¼ã€å¸ƒå±€å†³ç­–ï¼‰

**ä¸ºä»€ä¹ˆä¸éœ€è¦ç¬¬0å±‚åˆ†ç±»ç´¢å¼•ï¼Ÿ**
- å‘é‡æ£€ç´¢æœ¬èº«å°±æ˜¯è¯­ä¹‰ç†è§£ï¼Œå¯ä»¥ç›´æ¥æ‰¾åˆ°ç›¸å…³æ¨¡å—
- é¿å…åˆ†ç±»è¾¹ç•Œæ¨¡ç³Šï¼ˆå¦‚ï¼šå¤©æ°”æŸ¥è¯¢å±äºæ—…è¡Œè¿˜æ˜¯ç”Ÿæ´»ï¼Ÿï¼‰
- æ”¯æŒè·¨ç±»åˆ«çš„æ¨¡å—ç»„åˆï¼ˆå¦‚ï¼šè®¢æœºç¥¨+æŸ¥å¤©æ°”+æ¨èé…’åº—ï¼‰
- å‡å°‘ä¸€å±‚æ£€ç´¢ï¼Œæå‡é€Ÿåº¦

**å®ç°æ–¹å¼ï¼š**
- å‘é‡æ•°æ®åº“ï¼ˆChromaã€Pineconeï¼‰å­˜å‚¨æ‰€æœ‰æ¨¡å—çš„ Embedding
- ç”¨æˆ·è¾“å…¥ â†’ Embedding â†’ å‘é‡æ£€ç´¢ â†’ è¿”å› top-K ç›¸å…³æ¨¡å—
- LRU ç¼“å­˜çƒ­é—¨æ¨¡å—å®šä¹‰

### 3.2 ä»£ç åˆ†å±‚ï¼ˆå®ç°å¤ç”¨ï¼‰

**ç›®çš„ï¼š** é¿å…æ¯ä¸ªåŠŸèƒ½éƒ½å†™é‡å¤ä»£ç 

**åˆ†å±‚ç»“æ„ï¼š**

```
ç¬¬1å±‚ï¼šé€šç”¨ UI ç»„ä»¶ï¼ˆçº¯å±•ç¤ºé€»è¾‘ï¼‰
â”œâ”€ CardContainerï¼ˆå¡ç‰‡å®¹å™¨ï¼Œå¤„ç†å±•å¼€/æŠ˜å ï¼‰
â”œâ”€ ListCardï¼ˆåˆ—è¡¨å¡ç‰‡å¸ƒå±€ï¼‰
â”œâ”€ DetailPanelï¼ˆè¯¦æƒ…é¢æ¿ï¼‰
â”œâ”€ FormInputï¼ˆè¡¨å•è¾“å…¥ï¼‰
â””â”€ ActionButtonï¼ˆæ“ä½œæŒ‰é’®ï¼‰

ç¬¬2å±‚ï¼šå¸ƒå±€æ¨¡æ¿ï¼ˆç»„åˆç»„ä»¶ï¼‰
â”œâ”€ ListDetailLayoutï¼ˆåˆ—è¡¨+è¯¦æƒ…ï¼‰
â”œâ”€ MapViewLayoutï¼ˆåœ°å›¾è§†å›¾ï¼‰
â”œâ”€ FormLayoutï¼ˆè¡¨å•å¸ƒå±€ï¼‰
â””â”€ DashboardLayoutï¼ˆä»ªè¡¨ç›˜ï¼‰

ç¬¬3å±‚ï¼šæ•°æ®é€‚é…å™¨ï¼ˆå¤„ç†å·®å¼‚ï¼‰
â”œâ”€ FlightAdapterï¼ˆæœºç¥¨æ•°æ®é€‚é…ï¼‰
â”œâ”€ HotelAdapterï¼ˆé…’åº—æ•°æ®é€‚é…ï¼‰
â”œâ”€ ProductAdapterï¼ˆå•†å“æ•°æ®é€‚é…ï¼‰
â””â”€ WeatherAdapterï¼ˆå¤©æ°”æ•°æ®é€‚é…ï¼‰

ç¬¬4å±‚ï¼šåŠŸèƒ½æ¨¡å—å®šä¹‰ï¼ˆé…ç½®ï¼‰
â”œâ”€ flight_searchï¼ˆæœºç¥¨æœç´¢ï¼‰
â”œâ”€ hotel_searchï¼ˆé…’åº—æœç´¢ï¼‰
â”œâ”€ product_searchï¼ˆå•†å“æœç´¢ï¼‰
â””â”€ weather_infoï¼ˆå¤©æ°”ä¿¡æ¯ï¼‰

ç¬¬5å±‚ï¼šAPI å±‚ï¼ˆæ•°æ®æ¥æºï¼‰
â”œâ”€ flights/ï¼ˆæœºç¥¨ç›¸å…³APIï¼‰
â”œâ”€ hotels/ï¼ˆé…’åº—ç›¸å…³APIï¼‰
â””â”€ products/ï¼ˆå•†å“ç›¸å…³APIï¼‰
```

---

## å››ã€æ¨¡å—å®šä¹‰è§„èŒƒ

### 4.1 åŠŸèƒ½æ¨¡å—çš„ç»„æˆ

æ¯ä¸ªåŠŸèƒ½æ¨¡å—åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

**1. èº«ä»½ä¿¡æ¯ï¼ˆç”¨äº AI è¯†åˆ«ï¼‰**
- id: æ¨¡å—å”¯ä¸€æ ‡è¯†
- name: æ¨¡å—åç§°
- description: åŠŸèƒ½æè¿°ï¼ˆè¯¦ç»†çš„ä¸€å¥è¯ï¼Œä¾¿äº AI ç†è§£ï¼‰
- keywords: å…³é”®è¯åˆ—è¡¨ï¼ˆè¾…åŠ©å‘é‡æ£€ç´¢ï¼‰
- usageScenarios: ä½¿ç”¨åœºæ™¯æè¿°ï¼ˆå¸®åŠ© AI åˆ¤æ–­é€‚ç”¨æ€§ï¼‰

**2. å¸ƒå±€é…ç½®ï¼ˆAI å¯é€‰æ‹©ï¼‰**
- layoutOptions: æ”¯æŒçš„å¸ƒå±€ç±»å‹åˆ—è¡¨
  - ä¾‹å¦‚ï¼š["list-detail", "compact-list", "grid-view"]
  - AI æ ¹æ®ç”¨æˆ·éœ€æ±‚å’Œå±å¹•åœºæ™¯é€‰æ‹©æœ€åˆé€‚çš„
- defaultLayout: é»˜è®¤æ¨èå¸ƒå±€

**3. æ ·å¼é…ç½®ï¼ˆAI å¯å†³å®šï¼‰**
- styleOptions: æ ·å¼å˜ä½“é€‰é¡¹
  - cardStyle: ["elevated", "flat", "outlined"]  // å¡ç‰‡æ ·å¼
  - colorScheme: ["auto", "primary", "success", "warning"]  // ä¸»é¢˜è‰²
  - density: ["comfortable", "compact", "spacious"]  // å†…å®¹å¯†åº¦
- themeAdaptation: æ˜¯å¦æ”¯æŒè‡ªåŠ¨ä¸»é¢˜é€‚é…

**4. æ•°æ®é€‚é…å™¨ï¼ˆå¤„ç†æ•°æ®å·®å¼‚ï¼‰**
- cardSummaryRender: æŠ˜å çŠ¶æ€å¦‚ä½•æ˜¾ç¤ºæ‘˜è¦
- listItemRender: åˆ—è¡¨é¡¹å¦‚ä½•æ¸²æŸ“ï¼ˆæ”¯æŒå¤šç§æ¸²æŸ“æ¨¡å¼ï¼‰
- detailRender: è¯¦æƒ…å¦‚ä½•æ¸²æŸ“
- parameterMapping: å‚æ•°è½¬æ¢è§„åˆ™

**5. API ç»‘å®š**
- initialApi: åˆå§‹åŠ è½½æ—¶è°ƒç”¨çš„ API
- interactionApis: ç”¨æˆ·äº¤äº’æ—¶çš„ API æ˜ å°„

**6. äº¤äº’æµç¨‹**
- é»˜è®¤çŠ¶æ€ï¼šå±•å¼€/æŠ˜å 
- äº¤äº’äº‹ä»¶æ˜ å°„ï¼šç‚¹å‡»ã€æäº¤ã€é€‰æ‹©ç­‰

### 4.2 æ¨¡å—ç¤ºä¾‹ç»“æ„

```javascript
{
  // èº«ä»½ä¿¡æ¯
  id: "flight_search",
  name: "æœºç¥¨æœç´¢",
  description: "æœç´¢å›½å†…å¤–èˆªç­ï¼ŒæŸ¥çœ‹è¯¦æƒ…ï¼Œé¢„è®¢æœºç¥¨ï¼Œæ”¯æŒæŒ‰ä»·æ ¼ã€æ—¶é—´ã€èˆªç©ºå…¬å¸ç­›é€‰",
  keywords: ["æœºç¥¨", "èˆªç­", "é£æœº", "è®¢ç¥¨", "æœºç¥¨é¢„è®¢"],
  usageScenarios: "ç”¨æˆ·éœ€è¦æŸ¥è¯¢æˆ–é¢„è®¢æœºç¥¨æ—¶ä½¿ç”¨ï¼Œå¯å¤„ç†å•ç¨‹ã€å¾€è¿”ã€å¤šç¨‹æŸ¥è¯¢",
  
  // å¸ƒå±€é…ç½®ï¼ˆAI å¯é€‰æ‹©ï¼‰
  layoutOptions: ["list-detail", "compact-list", "grid-view"],
  defaultLayout: "list-detail",
  layoutDescriptions: {
    "list-detail": "åˆ—è¡¨+è¯¦æƒ…å¸ƒå±€ï¼Œé€‚åˆæ¡Œé¢ç«¯ï¼Œä¿¡æ¯å±•ç¤ºå®Œæ•´",
    "compact-list": "ç´§å‡‘åˆ—è¡¨ï¼Œé€‚åˆç§»åŠ¨ç«¯ï¼Œå¿«é€Ÿæµè§ˆ",
    "grid-view": "ç½‘æ ¼å¸ƒå±€ï¼Œé€‚åˆå¤šä¸ªé€‰é¡¹å¯¹æ¯”"
  },
  
  // æ ·å¼é…ç½®ï¼ˆAI å¯å†³å®šï¼‰
  styleOptions: {
    cardStyle: ["elevated", "flat", "outlined"],
    colorScheme: ["auto", "blue", "green"],
    density: ["comfortable", "compact"]
  },
  
  // æ•°æ®é€‚é…
  dataAdapter: "FlightAdapter",
  
  // API ç»‘å®š
  apis: {
    initial: "flights/search",
    detail: "flights/detail",
    book: "flights/book"
  },
  
  // äº¤äº’é…ç½®
  interactions: {
    onItemClick: "detail",
    onBookClick: "book"
  }
}
```

**AI å¦‚ä½•å†³ç­–æ ·å¼ï¼š**
- å¦‚æœç”¨æˆ·è¯´"å¿«é€Ÿçœ‹ä¸€ä¸‹æœºç¥¨"ï¼ŒAI é€‰æ‹© compact-list + compact å¯†åº¦
- å¦‚æœç”¨æˆ·è¯´"è¯¦ç»†å¯¹æ¯”ä¸€ä¸‹èˆªç­"ï¼ŒAI é€‰æ‹© list-detail + comfortable å¯†åº¦
- å¦‚æœç”¨æˆ·è¯´"çœ‹çœ‹æœ‰å“ªäº›é€‰æ‹©"ï¼ŒAI é€‰æ‹© grid-view å¸ƒå±€
- å¦‚æœç”¨æˆ·è¯´"ç•Œé¢ç®€æ´ç‚¹"ï¼ŒAI é€‰æ‹© flat å¡ç‰‡æ ·å¼
- å¦‚æœç”¨æˆ·è¯´"çªå‡ºæ˜¾ç¤ºé‡è¦ä¿¡æ¯"ï¼ŒAI é€‰æ‹© elevated å¡ç‰‡æ ·å¼

---

## äº”ã€é€šç”¨å¡ç‰‡ç±»å‹

### 5.1 æ¨ªå‘æ»‘åŠ¨åˆ—è¡¨å¡ç‰‡ï¼ˆHorizontal Scrollable List Cardï¼‰

**é€‚ç”¨åœºæ™¯ï¼š** Flightï¼ˆèˆªç­ï¼‰ã€Shoppingï¼ˆå•†å“ï¼‰ã€Yelpï¼ˆé¤å…ï¼‰ã€Videosï¼ˆè§†é¢‘ï¼‰ã€Imagesï¼ˆå›¾ç‰‡ï¼‰

**å¸ƒå±€ç‰¹ç‚¹ï¼š**
- å¡ç‰‡å†…å®¹æ¨ªå‘æ»‘åŠ¨å±•ç¤º
- å½“å‰é¡¹ï¼ˆ70%å®½åº¦ï¼‰ï¼šå®Œæ•´ä¿¡æ¯å±•ç¤º
- å¾…çœ‹é¡¹ï¼ˆ30%å®½åº¦ï¼‰ï¼šç®€ç•¥ä¿¡æ¯å±•ç¤º
- æ”¯æŒå·¦å³æ»‘åŠ¨åˆ‡æ¢

**å½“å‰é¡¹å†…å®¹ï¼š**
- å®Œæ•´å›¾ç‰‡/logo
- ä¸»æ ‡é¢˜ï¼ˆèˆªç­å·/å•†å“å/é¤å…åï¼‰
- å‰¯æ ‡é¢˜ï¼ˆæ—¶é—´/æè¿°/åœ°å€ï¼‰
- ä»·æ ¼/è¯„åˆ†
- è¯¦ç»†ä¿¡æ¯
- æ“ä½œæŒ‰é’®ï¼ˆé¢„è®¢/è´­ä¹°/æŸ¥çœ‹è¯¦æƒ…ï¼‰

**å¾…çœ‹é¡¹å†…å®¹ï¼š**
- ç¼©ç•¥å›¾/å°å›¾æ ‡
- ä¸»æ ‡é¢˜ï¼ˆå¯èƒ½æˆªæ–­ï¼‰
- å…³é”®ä¿¡æ¯ï¼ˆä»·æ ¼/è¯„åˆ†ï¼‰

**æ•°æ®é€‚é…å™¨æä¾›ï¼š**
```javascript
FlightAdapter = {
  // å½“å‰é¡¹æ¸²æŸ“ï¼ˆå®Œæ•´ä¿¡æ¯ï¼‰
  currentItemRender: (flight) => ({
    image: flight.airlineLogo,
    mainTitle: `${flight.airline} ${flight.flightNumber}`,
    subTitle: `${flight.departure} â†’ ${flight.arrival}`,
    time: `${flight.departureTime} - ${flight.arrivalTime}`,
    duration: flight.duration,
    price: `Â¥${flight.price}`,
    tags: [flight.cabin, flight.seats + 'åº§ä½'],
    actions: [
      { label: "æŸ¥çœ‹è¯¦æƒ…", action: "detail" },
      { label: "é¢„è®¢", action: "book", primary: true }
    ]
  }),
  
  // å¾…çœ‹é¡¹æ¸²æŸ“ï¼ˆç®€ç•¥ä¿¡æ¯ï¼‰
  previewItemRender: (flight) => ({
    icon: flight.airlineIcon,
    title: flight.airline,
    price: `Â¥${flight.price}`
  })
}
```

**å¤ç”¨ç¤ºä¾‹ï¼š**
- èˆªç­æœç´¢ï¼šä½¿ç”¨ FlightAdapter
- å•†å“æœç´¢ï¼šä½¿ç”¨ ShoppingAdapterï¼ˆåŒæ ·çš„æ¨ªå‘æ»‘åŠ¨ç»„ä»¶ï¼Œä¸åŒçš„é€‚é…å™¨ï¼‰
- é¤å…æœç´¢ï¼šä½¿ç”¨ YelpAdapter

### 5.2 ä¿¡æ¯å±•ç¤ºå¡ç‰‡ï¼ˆInfo Display Cardï¼‰

**é€‚ç”¨åœºæ™¯ï¼š** InfoCardï¼ˆä¿¡æ¯æœç´¢ã€æ–°é—»ã€å®æ—¶æ•°æ®ï¼‰

**å¸ƒå±€ç‰¹ç‚¹ï¼š**
- æ¨ªå‘æ»‘åŠ¨å±•ç¤ºä¸åŒä¿¡æ¯ç‰‡æ®µ
- å½“å‰é¡¹ï¼ˆ70%å®½åº¦ï¼‰ï¼šå®Œæ•´ä¿¡æ¯
- å¾…çœ‹é¡¹ï¼ˆ30%å®½åº¦ï¼‰ï¼šç®€ç•¥æ ‡é¢˜

**å½“å‰é¡¹å†…å®¹ï¼š**
- å®Œæ•´æ ‡é¢˜
- æ‘˜è¦å†…å®¹
- æ¥æº/å‘å¸ƒæ—¶é—´
- ç›¸å…³é“¾æ¥
- æŸ¥çœ‹è¯¦æƒ…æŒ‰é’®

**å¾…çœ‹é¡¹å†…å®¹ï¼š**
- ç®€ç•¥æ ‡é¢˜ï¼ˆæˆªæ–­ï¼‰
- æ¥æº/åˆ†ç±»

**ç‰¹ç‚¹ï¼š**
- ä»¥æ–‡æœ¬å†…å®¹ä¸ºä¸»
- å¯èƒ½åŒ…å«å›¾è¡¨æˆ–å›¾æ ‡
- æ¨ªå‘æ»‘åŠ¨æŸ¥çœ‹å¤šæ¡ä¿¡æ¯

### 5.3 äº¤äº’æ“ä½œå¡ç‰‡ï¼ˆInteractive Action Cardï¼‰

**é€‚ç”¨åœºæ™¯ï¼š** LineGeneralAgentï¼ˆèŠå¤©ï¼‰ã€GeneralAgentï¼ˆåº”ç”¨æ§åˆ¶ï¼‰ã€OrchestrationAgentï¼ˆå¤šæ­¥éª¤ï¼‰

**å¸ƒå±€ç‰¹ç‚¹ï¼š**
- æ¨ªå‘æ»‘åŠ¨å±•ç¤ºä¸åŒæ“ä½œé€‰é¡¹æˆ–å¯¹è¯
- å½“å‰é¡¹ï¼ˆ70%å®½åº¦ï¼‰ï¼šå®Œæ•´æ“ä½œç•Œé¢
- å¾…çœ‹é¡¹ï¼ˆ30%å®½åº¦ï¼‰ï¼šç®€ç•¥åç§°/å›¾æ ‡

**å½“å‰é¡¹å†…å®¹ï¼š**
- æ“ä½œå›¾æ ‡/å¤´åƒ
- æ“ä½œåç§°/è”ç³»äºº
- æ“ä½œæè¿°/æœ€åæ¶ˆæ¯
- æ‰§è¡ŒæŒ‰é’®/è¾“å…¥æ¡†
- å†å²è®°å½•/çŠ¶æ€

**å¾…çœ‹é¡¹å†…å®¹ï¼š**
- å›¾æ ‡/å¤´åƒ
- åç§°ï¼ˆæˆªæ–­ï¼‰
- çŠ¶æ€æŒ‡ç¤º

**ç‰¹ç‚¹ï¼š**
- äº¤äº’å¯†é›†ï¼Œéœ€è¦ç”¨æˆ·è¾“å…¥æˆ–ç¡®è®¤
- å¯èƒ½è§¦å‘é‡è¦æ“ä½œ
- æ¨ªå‘æ»‘åŠ¨æŸ¥çœ‹å¤šä¸ªæ“ä½œé€‰é¡¹æˆ–å¯¹è¯

---

## å…­ã€ç‰¹æ®Šå¡ç‰‡ç±»å‹

### 6.1 åœ°å›¾è§†å›¾å¡ç‰‡ï¼ˆMap View Cardï¼‰

**é€‚ç”¨åœºæ™¯ï¼š** MeetingViewï¼ˆä¼šé¢åœ°ç‚¹é€‰æ‹©ï¼‰

**å¸ƒå±€ç‰¹ç‚¹ï¼š**
- æ¨ªå‘æ»‘åŠ¨å±•ç¤ºä¸åŒæ¨èåœ°ç‚¹
- å½“å‰é¡¹ï¼ˆ70%å®½åº¦ï¼‰ï¼šå®Œæ•´åœ°å›¾å’Œåœ°ç‚¹ä¿¡æ¯
- å¾…çœ‹é¡¹ï¼ˆ30%å®½åº¦ï¼‰ï¼šå°åœ°å›¾ç¼©ç•¥å›¾å’Œåç§°
- æ¯ä¸ªé€‰é¡¹åŒ…å«äº¤äº’å¼åœ°å›¾

**å½“å‰é¡¹å†…å®¹ï¼š**
- äº¤äº’å¼åœ°å›¾åŒºåŸŸ
- åœ°ç‚¹åç§°
- è¯¦ç»†åœ°å€
- è·ç¦»ä¿¡æ¯
- äº¤é€šæ–¹å¼å’Œæ—¶é—´
- å¯¼èˆªæŒ‰é’®

**å¾…çœ‹é¡¹å†…å®¹ï¼š**
- å°åœ°å›¾ç¼©ç•¥å›¾
- åœ°ç‚¹åç§°
- è·ç¦»

**æ¨¡å—å®šä¹‰ï¼š**
```javascript
{
  id: "meeting_view",
  layoutType: "map-view-horizontal",  // æ¨ªå‘æ»‘åŠ¨åœ°å›¾å¸ƒå±€
  components: {
    currentItem: "InteractiveMapFull",  // å®Œæ•´åœ°å›¾
    previewItem: "MapThumbnail"  // åœ°å›¾ç¼©ç•¥å›¾
  }
}
```

### 6.2 å¸ƒå±€ç±»å‹æ€»ç»“

**å››ç§æ¨ªå‘æ»‘åŠ¨å¸ƒå±€ï¼š**

| å¸ƒå±€ç±»å‹ | é€‚ç”¨æ¨¡å— | å½“å‰é¡¹ç‰¹ç‚¹ | å¾…çœ‹é¡¹ç‰¹ç‚¹ |
|---------|----------|-----------|-----------|
| **horizontal-scrollable-list** | Flight, Shopping, Yelp, Videos, Images | å®Œæ•´å›¾ç‰‡+è¯¦ç»†ä¿¡æ¯+æ“ä½œæŒ‰é’® | ç¼©ç•¥å›¾+å…³é”®ä¿¡æ¯ |
| **info-display** | InfoCard | å®Œæ•´æ ‡é¢˜+æ‘˜è¦+æ¥æº+é“¾æ¥ | ç®€ç•¥æ ‡é¢˜+æ¥æº |
| **interactive-action** | LineGeneralAgent, GeneralAgent, OrchestrationAgent | å®Œæ•´æ“ä½œç•Œé¢+è¾“å…¥æ¡† | å›¾æ ‡+åç§° |
| **map-view-horizontal** | MeetingView | äº¤äº’å¼åœ°å›¾+å®Œæ•´åœ°ç‚¹ä¿¡æ¯ | åœ°å›¾ç¼©ç•¥å›¾+åç§° |

**å…³é”®è®¾è®¡åŸåˆ™ï¼š**
1. **å½“å‰é¡¹ä¼˜å…ˆ**ï¼šå§‹ç»ˆå®Œæ•´å±•ç¤ºå½“å‰é€‰ä¸­é¡¹çš„æ‰€æœ‰å…³é”®ä¿¡æ¯
2. **å¾…çœ‹é¡¹æç¤º**ï¼šç”¨ç®€ç•¥ä¿¡æ¯æç¤ºä¸‹ä¸€ä¸ªé€‰é¡¹ï¼Œå¸å¼•ç”¨æˆ·æ»‘åŠ¨
3. **å®½åº¦å›ºå®š**ï¼šå½“å‰é¡¹ + å¾…çœ‹é¡¹ = 100vwï¼Œç¡®ä¿è§†è§‰å¹³è¡¡
4. **æ»‘åŠ¨æµç•…**ï¼šå·¦æ»‘æ—¶å¾…çœ‹é¡¹å¹³æ»‘è¿‡æ¸¡ä¸ºå½“å‰é¡¹
5. **å†…å®¹é€‚é…**ï¼šæ ¹æ®ä¸åŒæ¨¡å—ç±»å‹é€‚é…å½“å‰é¡¹å’Œå¾…çœ‹é¡¹çš„å±•ç¤ºå†…å®¹

---

## ä¸ƒã€æ‰§è¡Œæµç¨‹

### 7.1 AI å†³ç­–é˜¶æ®µ

**è¾“å…¥ï¼š** ç”¨æˆ·è‡ªç„¶è¯­è¨€

**å¤„ç†ï¼š**
1. å‘é‡æ£€ç´¢æ‰€æœ‰æ¨¡å—ï¼Œè¿”å›æœ€ç›¸å…³çš„ 3-10 ä¸ªæ¨¡å—æ‘˜è¦
2. AI è¯­ä¹‰åˆ†æï¼Œé€‰æ‹© 1 ä¸ªæˆ–å¤šä¸ªæ¨¡å—
3. åŠ è½½é€‰ä¸­æ¨¡å—çš„è¯¦ç»†å®šä¹‰
4. AI æå–å‚æ•°
5. **AI å†³ç­–æ ·å¼**ï¼šæ ¹æ®ç”¨æˆ·æ„å›¾é€‰æ‹©å¸ƒå±€ã€ä¸»é¢˜ã€å¯†åº¦
6. ç”Ÿæˆå®Œæ•´æ‰§è¡Œè®¡åˆ’

**è¾“å‡ºï¼šæ‰§è¡Œè®¡åˆ’ï¼ˆJSONï¼‰**
```javascript
{
  // å…¨å±€æ ·å¼é…ç½®ï¼ˆAI å†³å®šï¼‰
  globalStyle: {
    theme: "light",              // AI å¯é€‰ï¼šlight, dark, auto
    accentColor: "blue",         // ä¸»è‰²è°ƒ
    pageLayout: "vertical"       // é¡µé¢å¸ƒå±€æ–¹å¼
  },
  
  // æ¨¡å—åˆ—è¡¨
  modules: [
    {
      instanceId: "flight-001",
      moduleId: "flight_search",
      priority: 1,
      defaultExpanded: true,
      
      // AI ä¸ºè¿™ä¸ªæ¨¡å—é€‰æ‹©çš„æ ·å¼ï¼ˆä»æ¨¡å—çš„ styleOptions ä¸­é€‰ï¼‰
      style: {
        layout: "list-detail",     // AI ä» layoutOptions ä¸­é€‰æ‹©
        cardStyle: "elevated",     // AI ä» cardStyle é€‰é¡¹ä¸­é€‰æ‹©
        colorScheme: "blue",       // AI ä» colorScheme é€‰é¡¹ä¸­é€‰æ‹©
        density: "comfortable"     // AI ä» density é€‰é¡¹ä¸­é€‰æ‹©
      },
      
      initialApi: {
        apiId: "flights/search",
        parameters: { from: "åŒ—äº¬", to: "ä¸Šæµ·", date: "2025-12-02" }
      },
      
      interactionApis: {
        onItemClick: { apiId: "flights/detail", ... },
        onBook: { apiId: "flights/book", ... }
      }
    },
    
    {
      instanceId: "hotel-001",
      moduleId: "hotel_search",
      priority: 2,
      defaultExpanded: false,
      
      // æ¬¡è¦æ¨¡å—å¯èƒ½ç”¨æ›´ç´§å‡‘çš„æ ·å¼
      style: {
        layout: "compact-list",
        cardStyle: "flat",
        density: "compact"
      },
      
      initialApi: { ... }
    }
  ]
}
```

**AI æ ·å¼å†³ç­–ç¤ºä¾‹ï¼š**

| ç”¨æˆ·è¾“å…¥ | AI å†³ç­– |
|---------|--------|
| "å¿«é€ŸæŸ¥ä¸€ä¸‹æœºç¥¨" | layout: compact-list, density: compact |
| "è¯¦ç»†å¯¹æ¯”èˆªç­ä¿¡æ¯" | layout: list-detail, density: comfortable |
| "ç®€æ´ç‚¹ï¼Œä¸è¦å¤ªèŠ±å“¨" | cardStyle: flat, colorScheme: auto |
| "é‡è¦ï¼Œçªå‡ºæ˜¾ç¤º" | cardStyle: elevated, colorScheme: primary |
| "ç§»åŠ¨ç«¯è®¿é—®" | layout: compact-list, density: compact |

### 7.2 åç«¯æ‰§è¡Œé˜¶æ®µ

**è¾“å…¥ï¼š** æ‰§è¡Œè®¡åˆ’

**å¤„ç†ï¼š**
1. éå†æ¯ä¸ªæ¨¡å—
2. åŠ è½½å¯¹åº”çš„æ¨¡å—é…ç½®å’Œé€‚é…å™¨
3. ä½¿ç”¨é€‚é…å™¨çš„ parameterMapping è½¬æ¢å‚æ•°
4. å¹¶è¡Œè°ƒç”¨æ‰€æœ‰ initialApiï¼ˆMock æˆ–çœŸå®ï¼‰
5. å°†è¿”å›æ•°æ®æ³¨å…¥åˆ°æ‰§è¡Œè®¡åˆ’ä¸­

**è¾“å‡ºï¼šæ¸²æŸ“æ•°æ®**
```javascript
{
  modules: [
    {
      instanceId: "flight-001",
      moduleConfig: { ...FlightSearchModule },  // æ¨¡å—é…ç½®
      adapter: FlightAdapter,                   // é€‚é…å™¨
      data: [ ...èˆªç­æ•°æ® ],                     // å·²åŠ è½½çš„æ•°æ®
      expanded: true,                           // å±•å¼€çŠ¶æ€
      interactionApis: { ... }                  // äº¤äº’æ˜ å°„
    },
    {
      instanceId: "hotel-001",
      moduleConfig: { ...HotelSearchModule },
      adapter: HotelAdapter,
      data: [ ...é…’åº—æ•°æ® ],
      expanded: false,                          // æŠ˜å çŠ¶æ€
      interactionApis: { ... }
    }
  ]
}
```

### 7.3 å‰ç«¯æ¸²æŸ“é˜¶æ®µ

**è¾“å…¥ï¼š** æ¸²æŸ“æ•°æ®

**å¤„ç†ï¼š**
1. æŒ‰ priority æ’åºæ¨¡å—
2. éå†æ¸²æŸ“æ¯ä¸ªæ¨¡å—å¡ç‰‡
3. æ ¹æ® expanded çŠ¶æ€å†³å®šå±•å¼€/æŠ˜å 
4. ä½¿ç”¨é€‚é…å™¨æ¸²æŸ“å…·ä½“å†…å®¹

**æ¸²æŸ“é€»è¾‘ï¼š**
```javascript
modules
  .sort((a, b) => a.priority - b.priority)
  .map(module => (
    <CardContainer
      key={module.instanceId}
      expanded={module.expanded}
      onToggle={...}
    >
      {/* æŠ˜å çŠ¶æ€ */}
      <CardHeader>
        {module.adapter.cardSummary(module.data)}
      </CardHeader>
      
      {/* å±•å¼€çŠ¶æ€ */}
      {module.expanded && (
        <CardBody>
          <LayoutRenderer 
            layoutType={module.moduleConfig.layoutType}
            adapter={module.adapter}
            data={module.data}
            interactions={module.interactionApis}
          />
        </CardBody>
      )}
    </CardContainer>
  ))
```

### 7.4 ç”¨æˆ·äº¤äº’é˜¶æ®µ

**åœºæ™¯ï¼š** ç”¨æˆ·ç‚¹å‡»æŸä¸ªèˆªç­æŸ¥çœ‹è¯¦æƒ…

**å¤„ç†ï¼š**
1. ç»„ä»¶è¯»å– interactionApis.onItemClick
2. ä½¿ç”¨é€‚é…å™¨çš„ parameterMapping è½¬æ¢å‚æ•°
3. è°ƒç”¨å¯¹åº”çš„ APIï¼ˆä¸å†è¯¢é—® AIï¼‰
4. æ›´æ–°å¡ç‰‡å†…å®¹ï¼ˆæ˜¾ç¤ºè¯¦æƒ…ï¼‰

**å…³é”®ï¼š** æ‰€æœ‰äº¤äº’éƒ½å·²åœ¨æ‰§è¡Œè®¡åˆ’ä¸­é¢„é…ç½®ï¼Œæ— éœ€å†æ¬¡ AI å†³ç­–

---

## å…«ã€API æ¨¡å—åŒ–è®¾è®¡

### 8.1 API å®šä¹‰è§„èŒƒ

æ¯ä¸ª API ç‹¬ç«‹å®šä¹‰ï¼ŒåŒ…å«ï¼š

```javascript
{
  id: "flights/search",
  name: "æœç´¢èˆªç­",
  description: "æ ¹æ®å‡ºå‘åœ°ã€ç›®çš„åœ°å’Œæ—¥æœŸæœç´¢èˆªç­",
  endpoint: "/api/flights/search",
  method: "POST",
  parameters: {
    from: { type: "string", required: true, description: "å‡ºå‘åŸå¸‚" },
    to: { type: "string", required: true, description: "ç›®çš„åœ°åŸå¸‚" },
    date: { type: "date", required: true, description: "å‡ºå‘æ—¥æœŸ" }
  },
  returnType: "Flight[]",
  mockData: "mock/flights_search.json"  // Mock æ•°æ®æ–‡ä»¶è·¯å¾„
}
```

### 8.2 å‚æ•°æ˜ å°„æœºåˆ¶

**é—®é¢˜ï¼š** AI ç†è§£çš„å‚æ•°å vs API éœ€è¦çš„å‚æ•°åå¯èƒ½ä¸åŒ

**è§£å†³ï¼š** é€‚é…å™¨ä¸­çš„ parameterMapping

**ç¤ºä¾‹ï¼š**
```javascript
// AI æå–çš„å‚æ•°
aiParams = {
  departure: "åŒ—äº¬",
  destination: "ä¸Šæµ·",
  date: "2025-12-02"
}

// é€‚é…å™¨è½¬æ¢
FlightAdapter.parameterMapping.search(aiParams)
// è¿”å› API éœ€è¦çš„å‚æ•°
{
  from: "åŒ—äº¬",      // departure â†’ from
  to: "ä¸Šæµ·",        // destination â†’ to
  date: "2025-12-02"
}
```

### 8.3 Mock æ¨¡å¼

**ç›®çš„ï¼š** åœ¨æ²¡æœ‰çœŸå®åç«¯æ—¶ï¼Œä¹Ÿèƒ½å®Œæ•´æµ‹è¯•æµç¨‹

**å®ç°æ–¹å¼ï¼š**

**1. Mock æ•°æ®æ–‡ä»¶ï¼š**
```json
// mock/flights_search.json
{
  "delay": 500,
  "response": [
    {
      "id": "CZ3001",
      "flightNumber": "CZ3001",
      "airline": "å—èˆª",
      "departure": "08:00",
      "arrival": "10:30",
      "price": 580
    }
  ]
}
```

**2. API æ‰§è¡Œå™¨æ£€æµ‹ Mock æ¨¡å¼ï¼š**
```javascript
async function callApi(apiId, parameters) {
  if (MOCK_MODE) {
    const mockConfig = loadMockData(apiId);
    await sleep(mockConfig.delay);
    return processMockResponse(mockConfig.response, parameters);
  } else {
    return await fetch(apiEndpoint, { ... });
  }
}
```

**3. åŠ¨æ€å‚æ•°æ›¿æ¢ï¼š**
```json
// mock/flights_detail.json
{
  "response": {
    "id": "${params.flightId}",   // ä½¿ç”¨è¯·æ±‚å‚æ•°
    "seats": ["1A", "1B", "2C"]
  }
}
```

---

## ä¹ã€æ¨¡å—éš”ç¦»æœºåˆ¶

### 9.1 ä¸ºä»€ä¹ˆéœ€è¦éš”ç¦»ï¼Ÿ

åŒä¸€é¡µé¢å¯èƒ½åŒæ—¶å±•ç¤ºå¤šä¸ªæ¨¡å—ï¼Œéœ€è¦é¿å…ï¼š
- çŠ¶æ€äº’ç›¸å¹²æ‰°
- æ•°æ®æ··æ·†
- äº‹ä»¶å†²çª

### 9.2 éš”ç¦»æ–¹å¼

**1. å®ä¾‹ ID éš”ç¦»**
æ¯ä¸ªæ¨¡å—éƒ½æœ‰å”¯ä¸€çš„ instanceIdï¼Œä¸æ˜¯ moduleId
- moduleId: æ¨¡å—ç±»å‹ï¼ˆå¦‚ flight_searchï¼‰
- instanceId: å…·ä½“å®ä¾‹ï¼ˆå¦‚ flight-001ï¼‰

**2. ç‹¬ç«‹çŠ¶æ€ç®¡ç†**
æ¯ä¸ªæ¨¡å—å®ä¾‹æœ‰è‡ªå·±çš„ state
```javascript
{
  instanceId: "flight-001",
  state: {
    data: [...],
    selectedItem: null,
    loading: false
  }
}
```

**3. API è°ƒç”¨éš”ç¦»**
API è°ƒç”¨æºå¸¦ instanceIdï¼Œç¡®ä¿å“åº”è¿”å›åˆ°æ­£ç¡®çš„å®ä¾‹

### 9.3 æ¨¡å—é—´é€šä¿¡ï¼ˆå¯é€‰ï¼‰

æŸäº›åœºæ™¯éœ€è¦æ¨¡å—åä½œï¼Œä½¿ç”¨äº‹ä»¶æ€»çº¿ï¼š

**åœºæ™¯ï¼š** ç”¨æˆ·é€‰æ‹©äº†èˆªç­åï¼Œé…’åº—æ¨¡å—è‡ªåŠ¨æœç´¢åˆ°è¾¾åŸå¸‚çš„é…’åº—

**å®ç°ï¼š**
```javascript
// æœºç¥¨æ¨¡å—å‘å¸ƒäº‹ä»¶
EventBus.emit('destination-selected', {
  city: "ä¸Šæµ·",
  date: "2025-12-02"
});

// é…’åº—æ¨¡å—è®¢é˜…äº‹ä»¶
EventBus.on('destination-selected', ({ city, date }) => {
  hotelModule.autoSearch({ city, checkIn: date });
});
```

---

## åã€å®ç°å»ºè®®

### 10.1 ç›®å½•ç»“æ„

```
project/
â”‚
â”œâ”€â”€ src/                          # å‰ç«¯ä»£ç ï¼ˆæ ¹ç›®å½•ï¼‰
â”‚   â”œâ”€â”€ components/               # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ CardContainer.tsx    # å¡ç‰‡å®¹å™¨ï¼ˆå±•å¼€/æŠ˜å ï¼‰
â”‚   â”‚   â”œâ”€â”€ ListCard.tsx         # åˆ—è¡¨å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ DetailPanel.tsx      # è¯¦æƒ…é¢æ¿
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ layouts/                  # å¸ƒå±€æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ ListDetailLayout.tsx
â”‚   â”‚   â”œâ”€â”€ CompactListLayout.tsx
â”‚   â”‚   â”œâ”€â”€ GridViewLayout.tsx
â”‚   â”‚   â”œâ”€â”€ MapViewLayout.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ adapters/                 # æ•°æ®é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ FlightAdapter.ts
â”‚   â”‚   â”œâ”€â”€ HotelAdapter.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                   # æ ·å¼é…ç½®
â”‚   â”‚   â”œâ”€â”€ themes/              # ä¸»é¢˜å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ light.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ dark.ts
â”‚   â”‚   â”‚   â””â”€â”€ auto.ts
â”‚   â”‚   â”œâ”€â”€ card-styles/         # å¡ç‰‡æ ·å¼å˜ä½“
â”‚   â”‚   â”‚   â”œâ”€â”€ elevated.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ flat.ts
â”‚   â”‚   â”‚   â””â”€â”€ outlined.ts
â”‚   â”‚   â””â”€â”€ density.ts           # å¯†åº¦é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                    # é¡µé¢ç»„ä»¶
â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚
â”‚   â””â”€â”€ utils/                    # å‰ç«¯å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ api-client.ts        # API è°ƒç”¨å®¢æˆ·ç«¯
â”‚
â”œâ”€â”€ server/                       # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ modules/                  # æ¨¡å—å®šä¹‰ï¼ˆé…ç½®ï¼‰
â”‚   â”‚   â”œâ”€â”€ flight_search/
â”‚   â”‚   â”‚   â”œâ”€â”€ module.json      # æ¨¡å—è¯¦ç»†å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ adapter.ts       # æœåŠ¡ç«¯é€‚é…å™¨ï¼ˆå¦‚éœ€è¦ï¼‰
â”‚   â”‚   â”œâ”€â”€ hotel_search/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ all-modules.json     # æ‰€æœ‰æ¨¡å—æ‘˜è¦ï¼ˆç”¨äºå‘é‡æ£€ç´¢ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ apis/                     # API å®ç°
â”‚   â”‚   â”œâ”€â”€ flights/
â”‚   â”‚   â”‚   â”œâ”€â”€ search.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ detail.ts
â”‚   â”‚   â”‚   â””â”€â”€ book.ts
â”‚   â”‚   â”œâ”€â”€ hotels/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ mock/                     # Mock æ•°æ®
â”‚   â”‚   â”œâ”€â”€ flights_search.json
â”‚   â”‚   â”œâ”€â”€ flights_detail.json
â”‚   â”‚   â”œâ”€â”€ hotels_search.json
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ai/                       # AI ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ retriever.ts         # å‘é‡æ£€ç´¢å™¨
â”‚   â”‚   â”œâ”€â”€ prompt.ts            # Prompt æ„å»º
â”‚   â”‚   â”œâ”€â”€ style-decision.ts    # æ ·å¼å†³ç­–é€»è¾‘
â”‚   â”‚   â””â”€â”€ executor.ts          # AI è°ƒç”¨å’Œæ‰§è¡Œè®¡åˆ’ç”Ÿæˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ orchestrator/             # æ€»åè°ƒå™¨
â”‚   â”‚   â”œâ”€â”€ plan-executor.ts     # æ‰§è¡Œè®¡åˆ’æ‰§è¡Œå™¨
â”‚   â”‚   â”œâ”€â”€ api-executor.ts      # API æ‰§è¡Œå™¨ï¼ˆæ”¯æŒMockï¼‰
â”‚   â”‚   â””â”€â”€ module-loader.ts     # æ¨¡å—åŠ è½½å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ database/                 # æ•°æ®åº“ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ vector-db.ts         # å‘é‡æ•°æ®åº“è¿æ¥
â”‚   â”‚   â””â”€â”€ cache.ts             # ç¼“å­˜ç®¡ç†
â”‚   â”‚
â”‚   â””â”€â”€ index.ts                  # åç«¯å…¥å£
â”‚
â”œâ”€â”€ shared/                       # å‰åç«¯å…±äº«ä»£ç 
â”‚   â”œâ”€â”€ types/                    # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ module.ts
â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”œâ”€â”€ execution-plan.ts
â”‚   â”‚   â””â”€â”€ style.ts
â”‚   â””â”€â”€ constants/                # å¸¸é‡å®šä¹‰
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

**å‰åç«¯èŒè´£åˆ’åˆ†ï¼š**

**å‰ç«¯ï¼ˆsrc/ï¼‰ï¼š**
- UI ç»„ä»¶çš„å®ç°
- å¸ƒå±€æ¨¡æ¿çš„å®ç°
- æ ·å¼ç³»ç»Ÿï¼ˆä¸»é¢˜ã€å¡ç‰‡æ ·å¼ã€å¯†åº¦ï¼‰
- æ ¹æ®æ‰§è¡Œè®¡åˆ’æ¸²æŸ“ç•Œé¢
- ç”¨æˆ·äº¤äº’å¤„ç†

**åç«¯ï¼ˆserver/ï¼‰ï¼š**
- æ¨¡å—å®šä¹‰å’Œç®¡ç†
- AI å†³ç­–ï¼ˆæ¨¡å—é€‰æ‹©ã€æ ·å¼å†³ç­–ï¼‰
- API è°ƒç”¨å’Œæ‰§è¡Œ
- å‘é‡æ£€ç´¢
- æ‰§è¡Œè®¡åˆ’ç”Ÿæˆ

**å…±äº«ï¼ˆshared/ï¼‰ï¼š**
- TypeScript ç±»å‹å®šä¹‰
- å‰åç«¯éƒ½éœ€è¦çš„å¸¸é‡
- åè®®å®šä¹‰

### 10.2 å¼€å‘é¡ºåº

**é˜¶æ®µ1ï¼šåŸºç¡€ç»„ä»¶**
1. CardContainerï¼ˆå±•å¼€/æŠ˜å åŠŸèƒ½ï¼‰
2. ListCardï¼ˆé€šç”¨åˆ—è¡¨å¡ç‰‡ï¼‰
3. DetailPanelï¼ˆé€šç”¨è¯¦æƒ…é¢æ¿ï¼‰

**é˜¶æ®µ2ï¼šå¸ƒå±€å’Œé€‚é…**
1. ListDetailLayoutï¼ˆç¬¬ä¸€ä¸ªå¸ƒå±€æ¨¡æ¿ï¼‰
2. FlightAdapterï¼ˆç¬¬ä¸€ä¸ªé€‚é…å™¨ï¼‰
3. HotelAdapterï¼ˆç¬¬äºŒä¸ªé€‚é…å™¨ï¼ŒéªŒè¯å¤ç”¨ï¼‰

**é˜¶æ®µ3ï¼šæ¨¡å—å’Œ API**
1. å®šä¹‰ flight_search æ¨¡å—
2. å®ç° flights APIï¼ˆMock æ¨¡å¼ï¼‰
3. é›†æˆæµ‹è¯•

**é˜¶æ®µ4ï¼šAI é›†æˆ**
1. å®ç°åˆ†å±‚æ£€ç´¢å™¨
2. å®ç°æ‰§è¡Œè®¡åˆ’ç”Ÿæˆ
3. é›†æˆ OpenAI/Claude API

**é˜¶æ®µ5ï¼šæ‰©å±•**
1. æ·»åŠ æ›´å¤šæ¨¡å—
2. æ·»åŠ ç‰¹æ®Šå¡ç‰‡ç±»å‹
3. ä¼˜åŒ–å’Œæ€§èƒ½è°ƒä¼˜

### 10.3 æŠ€æœ¯æ ˆå»ºè®®

**å‰ç«¯ï¼š**
- React + TypeScript
- çŠ¶æ€ç®¡ç†ï¼šZustand æˆ– Jotai
- UI åº“ï¼šTailwind CSS + shadcn/ui
- åŠ¨ç”»ï¼šFramer Motionï¼ˆå¡ç‰‡å±•å¼€/æŠ˜å åŠ¨ç”»ï¼‰

**åç«¯ï¼š**
- Node.js + Express æˆ– Next.js API Routes
- å‘é‡æ•°æ®åº“ï¼šChromaï¼ˆæœ¬åœ°ï¼‰æˆ– Pineconeï¼ˆäº‘ç«¯ï¼‰
- AIï¼šOpenAI API æˆ– Anthropic Claude API

**å¼€å‘å·¥å…·ï¼š**
- ç±»å‹æ ¡éªŒï¼šTypeScript strict mode
- ä»£ç è§„èŒƒï¼šESLint + Prettier
- æµ‹è¯•ï¼šVitest + React Testing Library

---

## åä¸€ã€å…³é”®è®¾è®¡åŸåˆ™

### 11.1 AI åªåœ¨å¼€å§‹æ—¶å·¥ä½œ

AI ç”Ÿæˆå®Œæ•´çš„æ‰§è¡Œè®¡åˆ’åï¼Œæ‰€æœ‰åç»­äº¤äº’éƒ½åŸºäºé¢„é…ç½®çš„è§„åˆ™ï¼Œä¸å†è¯¢é—® AIã€‚

**å¥½å¤„ï¼š**
- å“åº”å¿«é€Ÿ
- æˆæœ¬ä½
- ç”¨æˆ·ä½“éªŒç¡®å®š

### 11.2 é…ç½®é©±åŠ¨ï¼Œè€Œéç¡¬ç¼–ç 

æ¨¡å—çš„è¡Œä¸ºç”±é…ç½®æ–‡ä»¶å®šä¹‰ï¼Œä¸å†™æ­»åœ¨ä»£ç ä¸­ã€‚

**å¥½å¤„ï¼š**
- æ˜“äºæ‰©å±•æ–°æ¨¡å—
- ä¾¿äº A/B æµ‹è¯•
- å¯çƒ­æ›´æ–°é…ç½®

### 11.3 ç»„ä»¶å¤ç”¨ï¼Œé€‚é…å™¨å·®å¼‚

ç›¸åŒå¸ƒå±€çš„æ¨¡å—å¤ç”¨ç»„ä»¶ï¼Œé€šè¿‡é€‚é…å™¨å¤„ç†æ•°æ®å·®å¼‚ã€‚

**å¥½å¤„ï¼š**
- å‡å°‘ä»£ç é‡
- ç»Ÿä¸€ç”¨æˆ·ä½“éªŒ
- æ˜“äºç»´æŠ¤

### 11.4 åˆ†å±‚æ£€ç´¢ï¼ŒæŒ‰éœ€åŠ è½½

æ¨¡å—å®šä¹‰åˆ†å±‚å­˜å‚¨ï¼Œä½¿ç”¨å‘é‡æ£€ç´¢åªåŠ è½½ç›¸å…³éƒ¨åˆ†ã€‚

**å¥½å¤„ï¼š**
- èŠ‚çœ Token
- æå‡é€Ÿåº¦
- æ”¯æŒå¤§è§„æ¨¡æ¨¡å—åº“

### 11.5 å®ä¾‹éš”ç¦»ï¼Œæ¾è€¦åˆ

æ¯ä¸ªæ¨¡å—æ˜¯ç‹¬ç«‹å®ä¾‹ï¼Œéœ€è¦åä½œæ—¶é€šè¿‡äº‹ä»¶é€šä¿¡ã€‚

**å¥½å¤„ï¼š**
- é¿å…çŠ¶æ€æ±¡æŸ“
- å¹¶å‘æ¸²æŸ“
- å•ç‹¬æ›´æ–°

---

## åäºŒã€AI æ ·å¼å†³ç­–ç³»ç»Ÿ

### 12.1 ä¸ºä»€ä¹ˆè®© AI å†³å®šæ ·å¼ï¼Ÿ

ä¼ ç»Ÿ UI ç³»ç»Ÿä¸­ï¼Œæ ·å¼æ˜¯ç”±å¼€å‘è€…é¢„å…ˆå®šä¹‰çš„å›ºå®šæ–¹æ¡ˆã€‚ä½†åœ¨æˆ‘ä»¬çš„æ¶æ„ä¸­ï¼ŒAI å¯ä»¥æ ¹æ®ï¼š
- ç”¨æˆ·çš„è¯­è¨€è¡¨è¾¾ï¼ˆ"å¿«é€Ÿçœ‹ä¸€ä¸‹" vs "è¯¦ç»†å¯¹æ¯”"ï¼‰
- ä½¿ç”¨åœºæ™¯ï¼ˆç§»åŠ¨ç«¯ vs æ¡Œé¢ç«¯ï¼‰
- å†…å®¹é‡è¦æ€§ï¼ˆä¸»è¦ä¿¡æ¯ vs è¾…åŠ©ä¿¡æ¯ï¼‰
- ç”¨æˆ·åå¥½ï¼ˆç®€æ´ vs ä¸°å¯Œï¼‰

åŠ¨æ€é€‰æ‹©æœ€åˆé€‚çš„å±•ç¤ºæ–¹å¼ï¼Œå®ç°çœŸæ­£çš„æ™ºèƒ½åŒ–ç•Œé¢ã€‚

### 12.2 æ ·å¼å†³ç­–ç»´åº¦

**1. å¸ƒå±€é€‰æ‹©ï¼ˆLayoutï¼‰**
- list-detail: åˆ—è¡¨+è¯¦æƒ…ï¼Œé€‚åˆæ¡Œé¢ç«¯è¯¦ç»†æŸ¥çœ‹
- compact-list: ç´§å‡‘åˆ—è¡¨ï¼Œé€‚åˆå¿«é€Ÿæµè§ˆã€ç§»åŠ¨ç«¯
- grid-view: ç½‘æ ¼å¸ƒå±€ï¼Œé€‚åˆå¤šé€‰é¡¹å¯¹æ¯”
- map-view: åœ°å›¾è§†å›¾ï¼Œé€‚åˆåœ°ç†ä½ç½®ç›¸å…³
- dashboard: ä»ªè¡¨ç›˜ï¼Œé€‚åˆæ•°æ®å±•ç¤º

**2. å¡ç‰‡æ ·å¼ï¼ˆCard Styleï¼‰**
- elevated: æµ®èµ·æ•ˆæœï¼Œè§†è§‰å±‚æ¬¡æ˜æ˜¾ï¼Œé€‚åˆé‡è¦å†…å®¹
- flat: æ‰å¹³æ ·å¼ï¼Œç®€æ´ç°ä»£ï¼Œé€‚åˆæ¬¡è¦å†…å®¹
- outlined: è¾¹æ¡†æ ·å¼ï¼Œé€‚åˆè¡¨å•æˆ–éœ€è¦è¾¹ç•Œæ„Ÿçš„å†…å®¹

**3. ä¸»é¢˜è‰²ï¼ˆColor Schemeï¼‰**
- auto: è‡ªåŠ¨é€‚é…ï¼ˆè·Ÿéšç³»ç»Ÿï¼‰
- primary/blue: æ ‡å‡†ä¸»è‰²ï¼Œé€‚åˆå¸¸è§„å†…å®¹
- success/green: æˆåŠŸã€ç¯ä¿ä¸»é¢˜
- warning/yellow: è­¦å‘Šã€éœ€è¦æ³¨æ„çš„å†…å®¹
- error/red: é”™è¯¯ã€ç´§æ€¥å†…å®¹

**4. å†…å®¹å¯†åº¦ï¼ˆDensityï¼‰**
- comfortable: èˆ’é€‚é—´è·ï¼Œé€‚åˆè¯¦ç»†é˜…è¯»
- compact: ç´§å‡‘é—´è·ï¼Œé€‚åˆå¿«é€Ÿæµè§ˆã€ä¿¡æ¯é‡å¤§æ—¶
- spacious: å®½æ¾é—´è·ï¼Œé€‚åˆé‡è¦ä¿¡æ¯ã€éœ€è¦å¼ºè°ƒæ—¶

### 12.3 AI å†³ç­–ç¤ºä¾‹

**åœºæ™¯1ï¼šç”¨æˆ·è¯´"å¿«é€Ÿçœ‹ä¸€ä¸‹æ˜å¤©åŒ—äº¬åˆ°ä¸Šæµ·çš„æœºç¥¨"**
```javascript
// AI å†³ç­–
{
  moduleId: "flight_search",
  style: {
    layout: "compact-list",      // "å¿«é€Ÿ" â†’ ç´§å‡‘å¸ƒå±€
    density: "compact",          // èŠ‚çœç©ºé—´ï¼Œå¿«é€Ÿæµè§ˆ
    cardStyle: "flat"           // ç®€æ´æ ·å¼
  }
}
```

**åœºæ™¯2ï¼šç”¨æˆ·è¯´"å¸®æˆ‘è¯¦ç»†å¯¹æ¯”ä¸€ä¸‹æ˜å¤©çš„èˆªç­ï¼Œæˆ‘è¦é€‰æœ€åˆé€‚çš„"**
```javascript
// AI å†³ç­–
{
  moduleId: "flight_search",
  style: {
    layout: "list-detail",       // "è¯¦ç»†å¯¹æ¯”" â†’ è¯¦æƒ…å¸ƒå±€
    density: "comfortable",      // èˆ’é€‚é˜…è¯»
    cardStyle: "elevated"       // çªå‡ºæ˜¾ç¤ºï¼Œä¾¿äºå¯¹æ¯”
  }
}
```

**åœºæ™¯3ï¼šç”¨æˆ·è¯´"ç•Œé¢ç®€æ´ç‚¹ï¼Œä¸è¦èŠ±é‡Œèƒ¡å“¨çš„"**
```javascript
// AI å†³ç­–
{
  globalStyle: {
    theme: "light",
    accentColor: "gray"          // ç°è‰²ç³»ï¼Œä½è°ƒ
  },
  modules: [{
    style: {
      layout: "compact-list",
      cardStyle: "flat",          // æ‰å¹³ç®€æ´
      density: "compact"
    }
  }]
}
```

**åœºæ™¯4ï¼šç”¨æˆ·è¯´"è¿™ä¸ªå¾ˆé‡è¦ï¼Œè¦çªå‡ºæ˜¾ç¤º"**
```javascript
// AI å†³ç­–
{
  style: {
    cardStyle: "elevated",        // æµ®èµ·æ•ˆæœï¼Œçªå‡º
    colorScheme: "primary",       // ä½¿ç”¨ä¸»è‰²
    density: "spacious"          // å®½æ¾é—´è·ï¼Œå¼ºè°ƒ
  },
  priority: 1,                    // è®¾ä¸ºæœ€é«˜ä¼˜å…ˆçº§
  defaultExpanded: true           // é»˜è®¤å±•å¼€
}
```

### 12.4 å®ç°æ–¹å¼

**1. åœ¨æ¨¡å—å®šä¹‰ä¸­å£°æ˜æ ·å¼é€‰é¡¹ï¼š**
```javascript
{
  id: "flight_search",
  layoutOptions: ["list-detail", "compact-list", "grid-view"],
  styleOptions: {
    cardStyle: ["elevated", "flat", "outlined"],
    colorScheme: ["auto", "blue", "green"],
    density: ["comfortable", "compact", "spacious"]
  }
}
```

**2. AI Prompt ä¸­åŒ…å«æ ·å¼æŒ‡å¯¼ï¼š**
```
åœ¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’æ—¶ï¼Œæ ¹æ®ç”¨æˆ·çš„è¡¨è¾¾é€‰æ‹©åˆé€‚çš„æ ·å¼ï¼š

å¸ƒå±€é€‰æ‹©ï¼š
- å¦‚æœç”¨æˆ·è¯´"å¿«é€Ÿ/ç®€å•/çœ‹ä¸€ä¸‹" â†’ compact-list
- å¦‚æœç”¨æˆ·è¯´"è¯¦ç»†/å¯¹æ¯”/åˆ†æ" â†’ list-detail
- å¦‚æœç”¨æˆ·è¯´"æœ‰å“ªäº›é€‰æ‹©" â†’ grid-view

å¯†åº¦é€‰æ‹©ï¼š
- å¦‚æœç”¨æˆ·å¼ºè°ƒé€Ÿåº¦ â†’ compact
- å¦‚æœç”¨æˆ·å¼ºè°ƒè¯¦ç»† â†’ comfortable
- å¦‚æœç”¨æˆ·å¼ºè°ƒé‡è¦ â†’ spacious

å¡ç‰‡æ ·å¼ï¼š
- å¦‚æœæ˜¯ä¸»è¦å†…å®¹/é‡è¦ä¿¡æ¯ â†’ elevated
- å¦‚æœæ˜¯è¾…åŠ©å†…å®¹/æ¬¡è¦ä¿¡æ¯ â†’ flat
- å¦‚æœæ˜¯è¡¨å•/éœ€è¦è¾¹ç•Œ â†’ outlined
```

**3. å‰ç«¯æ ·å¼ç³»ç»Ÿï¼š**
```typescript
// src/styles/style-renderer.ts
export function renderCardStyle(style: StyleConfig) {
  const layoutClass = layoutStyles[style.layout];
  const cardClass = cardStyles[style.cardStyle];
  const densityClass = densityStyles[style.density];
  const colorClass = colorSchemes[style.colorScheme];
  
  return {
    className: `${layoutClass} ${cardClass} ${densityClass} ${colorClass}`,
    style: {
      // CSS in JS
    }
  };
}
```

### 12.5 æ ·å¼é€‚é…å™¨

æŸäº›æ¨¡å—å¯èƒ½éœ€è¦ç‰¹æ®Šçš„æ ·å¼å¤„ç†ï¼š

```typescript
// adapters/FlightAdapter.ts
export const FlightAdapter = {
  // ... å…¶ä»–é…ç½®
  
  styleAdapter: {
    // æ ¹æ®æ•°æ®åŠ¨æ€è°ƒæ•´æ ·å¼
    dynamicStyle: (data, baseStyle) => {
      // å¦‚æœèˆªç­æ•°é‡å¾ˆå¤šï¼Œå¼ºåˆ¶ä½¿ç”¨ compact
      if (data.length > 20) {
        return { ...baseStyle, density: "compact" };
      }
      
      // å¦‚æœæœ‰ç‰¹ä»·èˆªç­ï¼Œä½¿ç”¨æˆåŠŸè‰²é«˜äº®
      if (data.some(f => f.isSpecialOffer)) {
        return { ...baseStyle, colorScheme: "success" };
      }
      
      return baseStyle;
    }
  }
}
```

### 12.6 ç”¨æˆ·å¯è¦†ç›–

è™½ç„¶ AI åšå‡ºäº†æ ·å¼å†³ç­–ï¼Œä½†ç”¨æˆ·ä»å¯ä»¥æ‰‹åŠ¨è°ƒæ•´ï¼š

```javascript
// ç”¨æˆ·ç‚¹å‡»"åˆ‡æ¢è§†å›¾"æŒ‰é’®
<ViewSwitcher 
  currentLayout={aiSelectedLayout}
  availableLayouts={module.layoutOptions}
  onChange={(newLayout) => {
    // è¦†ç›– AI çš„é€‰æ‹©
    updateModuleStyle(moduleId, { layout: newLayout });
  }}
/>
```

---

## åä¸‰ã€å®Œæ•´å®ç°ç»†èŠ‚ä¸å…³é”®é—®é¢˜

### 13.1 å‰åç«¯äº¤äº’åè®®

#### ç”¨æˆ·è¯·æ±‚å®Œæ•´æµç¨‹

```
ç”¨æˆ·æµè§ˆå™¨
    â†“ 1. å‘é€è‡ªç„¶è¯­è¨€è¯·æ±‚
å‰ç«¯ (src/)
    â†“ 2. POST /api/ai/generate-plan
åç«¯ (server/)
    â†“ 3. AI å¤„ç†ï¼ˆåœ¨åç«¯è¿›è¡Œï¼‰
    â”‚   â”œâ”€ å‘é‡æ£€ç´¢æ¨¡å—
    â”‚   â”œâ”€ AI å†³ç­–ï¼ˆOpenAI/Claudeï¼‰
    â”‚   â”œâ”€ æ ·å¼å†³ç­–
    â”‚   â””â”€ ç”Ÿæˆæ‰§è¡Œè®¡åˆ’
    â†“ 4. æ‰§è¡Œ initialApi è°ƒç”¨ï¼ˆå¹¶è¡Œï¼‰
    â”‚   â”œâ”€ çœŸå® API æˆ–
    â”‚   â””â”€ Mock æ•°æ®
    â†“ 5. è¿”å›å®Œæ•´æ¸²æŸ“æ•°æ®
å‰ç«¯
    â†“ 6. æ ¹æ®æ•°æ®æ¸²æŸ“å¡ç‰‡
    â†“ 7. ç”¨æˆ·äº¤äº’
    â†“ 8. POST /api/execute
åç«¯
    â†“ 9. æ‰§è¡Œå¯¹åº” APIï¼ˆä¸å†è°ƒç”¨ AIï¼‰
    â†“ 10. è¿”å›ç»“æœ
å‰ç«¯
    â””â”€ 11. æ›´æ–°å¡ç‰‡å†…å®¹
```

#### å…³é”®æ¥å£å®šä¹‰

**1. ç”Ÿæˆæ‰§è¡Œè®¡åˆ’æ¥å£**
```typescript
// POST /api/ai/generate-plan
Request: {
  userInput: string;              // "è®¢æ˜å¤©åŒ—äº¬åˆ°ä¸Šæµ·çš„æœºç¥¨"
  context?: {                     // å¯é€‰çš„ä¸Šä¸‹æ–‡
    deviceType: "desktop" | "mobile";
    previousModules?: string[];   // ä¹‹å‰ä½¿ç”¨è¿‡çš„æ¨¡å—
    userPreferences?: any;        // ç”¨æˆ·åå¥½
  }
}

Response: {
  success: boolean;
  executionPlan: {
    globalStyle: {
      theme: "light" | "dark" | "auto";
      accentColor: string;
      pageLayout: "vertical" | "horizontal";
    };
    modules: Array<{
      instanceId: string;
      moduleId: string;
      priority: number;
      defaultExpanded: boolean;
      
      // AI å†³ç­–çš„æ ·å¼
      style: {
        layout: string;
        cardStyle: string;
        colorScheme: string;
        density: string;
      };
      
      // å·²ç»åŠ è½½å¥½çš„åˆå§‹æ•°æ®
      data: any;
      
      // æ¨¡å—é…ç½®ï¼ˆå‰ç«¯æ¸²æŸ“éœ€è¦ï¼‰
      moduleConfig: {
        name: string;
        layoutOptions: string[];
        // ... å…¶ä»–é…ç½®
      };
      
      // äº¤äº’ API æ˜ å°„
      interactionApis: {
        [action: string]: {
          apiId: string;
          endpoint: string;
          method: string;
          parameterTemplate: any;
        }
      };
    }>;
  };
  error?: string;
}
```

**2. æ‰§è¡Œäº¤äº’æ¥å£**
```typescript
// POST /api/execute
Request: {
  instanceId: string;             // å“ªä¸ªæ¨¡å—å®ä¾‹
  action: string;                 // å“ªä¸ªäº¤äº’åŠ¨ä½œï¼ˆå¦‚ "onItemClick"ï¼‰
  context: any;                   // ä¸Šä¸‹æ–‡æ•°æ®ï¼ˆå¦‚é€‰ä¸­çš„é¡¹ï¼‰
}

Response: {
  success: boolean;
  data: any;
  error?: string;
}
```

### 13.2 å®Œå…¨ Mock å®ç°æ–¹æ¡ˆ

#### Mock å±‚çº§

**ç¬¬1å±‚ï¼šAI Mockï¼ˆæ¨¡æ‹Ÿ AI å†³ç­–ï¼‰**
```typescript
// server/ai/mock-ai.ts
export class MockAI {
  // æ¨¡æ‹Ÿ AI çš„æ¨¡å—é€‰æ‹©å’Œæ ·å¼å†³ç­–
  async generatePlan(userInput: string) {
    // ç®€å•çš„å…³é”®è¯åŒ¹é…ä»£æ›¿å‘é‡æ£€ç´¢
    const keywords = {
      "æœºç¥¨|èˆªç­|é£æœº": "flight_search",
      "é…’åº—|ä½å®¿|è®¢æˆ¿": "hotel_search",
      "å¤©æ°”": "weather_info",
    };
    
    // åŒ¹é…æ¨¡å—
    let selectedModules = [];
    for (const [pattern, moduleId] of Object.entries(keywords)) {
      if (new RegExp(pattern).test(userInput)) {
        selectedModules.push(moduleId);
      }
    }
    
    // æ ·å¼å†³ç­–ï¼ˆç®€å•è§„åˆ™ï¼‰
    const styleDecision = {
      layout: userInput.includes("å¿«é€Ÿ") ? "compact-list" : "list-detail",
      density: userInput.includes("è¯¦ç»†") ? "comfortable" : "compact",
      cardStyle: userInput.includes("ç®€æ´") ? "flat" : "elevated",
    };
    
    return {
      modules: selectedModules.map((moduleId, index) => ({
        moduleId,
        priority: index + 1,
        style: styleDecision,
        // ...
      }))
    };
  }
}
```

**ç¬¬2å±‚ï¼šAPI Mock**
```typescript
// server/mock/mock-executor.ts
export class MockAPIExecutor {
  async execute(apiId: string, parameters: any) {
    // è¯»å– mock æ•°æ®æ–‡ä»¶
    const mockData = await this.loadMockData(apiId);
    
    // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
    await this.delay(mockData.delay || 300);
    
    // åŠ¨æ€å‚æ•°æ›¿æ¢
    return this.processTemplate(mockData.response, parameters);
  }
  
  private processTemplate(template: any, params: any) {
    let json = JSON.stringify(template);
    
    // æ›¿æ¢ ${params.xxx} å ä½ç¬¦
    Object.entries(params).forEach(([key, value]) => {
      json = json.replace(
        new RegExp(`\\$\\{params\\.${key}\\}`, 'g'),
        String(value)
      );
    });
    
    return JSON.parse(json);
  }
}
```

**ç¬¬3å±‚ï¼šå®Œæ•´ Mock æ¨¡å¼å¼€å…³**
```typescript
// server/config.ts
export const config = {
  mode: process.env.MODE || "mock",  // mock | real | hybrid
  
  ai: {
    useMock: process.env.AI_MOCK === "true",
    apiKey: process.env.OPENAI_API_KEY,
  },
  
  api: {
    useMock: process.env.API_MOCK === "true",
  }
};

// server/orchestrator/orchestrator.ts
export class Orchestrator {
  private aiService: AIService | MockAI;
  private apiExecutor: APIExecutor | MockAPIExecutor;
  
  constructor() {
    // æ ¹æ®é…ç½®é€‰æ‹©çœŸå®æˆ– Mock
    this.aiService = config.ai.useMock 
      ? new MockAI() 
      : new RealAI();
      
    this.apiExecutor = config.api.useMock
      ? new MockAPIExecutor()
      : new RealAPIExecutor();
  }
}
```

#### Mock æ•°æ®ç¤ºä¾‹

```json
// server/mock/flights_search.json
{
  "delay": 500,
  "response": [
    {
      "id": "flight_${params.from}_${params.to}_1",
      "flightNumber": "CZ3001",
      "airline": "å—èˆª",
      "from": "${params.from}",
      "to": "${params.to}",
      "date": "${params.date}",
      "departure": "08:00",
      "arrival": "10:30",
      "price": 580,
      "seats": 120
    },
    {
      "id": "flight_${params.from}_${params.to}_2",
      "flightNumber": "MU5001",
      "airline": "ä¸œèˆª",
      "from": "${params.from}",
      "to": "${params.to}",
      "date": "${params.date}",
      "departure": "09:30",
      "arrival": "12:00",
      "price": 620,
      "seats": 85
    }
  ]
}
```

### 13.3 å‰ç«¯å®¹é”™å’Œé™çº§

#### å‰ç«¯ä¸å®Œå…¨ä¾èµ–åç«¯

```typescript
// src/components/CardContainer.tsx
export function CardContainer({ 
  moduleData,
  onRetry 
}: CardContainerProps) {
  const [state, setState] = useState<'loading' | 'success' | 'error'>('loading');
  
  // å‰ç«¯æœ‰åŸºæœ¬çš„å®¹é”™é€»è¾‘
  useEffect(() => {
    if (!moduleData) {
      setState('error');
    } else if (moduleData.data) {
      setState('success');
    }
  }, [moduleData]);
  
  // é”™è¯¯çŠ¶æ€ï¼šæ˜¾ç¤ºå ä½ç¬¦å’Œé‡è¯•æŒ‰é’®
  if (state === 'error') {
    return (
      <Card>
        <ErrorPlaceholder 
          message="æ¨¡å—åŠ è½½å¤±è´¥"
          onRetry={onRetry}
        />
      </Card>
    );
  }
  
  // åŠ è½½çŠ¶æ€ï¼šæ˜¾ç¤ºéª¨æ¶å±
  if (state === 'loading') {
    return <CardSkeleton />;
  }
  
  // æˆåŠŸçŠ¶æ€ï¼šæ­£å¸¸æ¸²æŸ“
  return <CardContent data={moduleData} />;
}
```

#### å‰ç«¯é™çº§æ–¹æ¡ˆ

```typescript
// src/utils/fallback.ts
export class FallbackHandler {
  // å¦‚æœ AI è¿”å›çš„æ ·å¼é…ç½®æ— æ•ˆï¼Œä½¿ç”¨é»˜è®¤é…ç½®
  static getValidStyle(style: StyleConfig, moduleConfig: ModuleConfig) {
    const validLayout = moduleConfig.layoutOptions.includes(style.layout)
      ? style.layout
      : moduleConfig.defaultLayout;
      
    return {
      layout: validLayout,
      cardStyle: style.cardStyle || "elevated",
      density: style.density || "comfortable",
      colorScheme: style.colorScheme || "auto",
    };
  }
  
  // å¦‚æœæ¨¡å—åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬
  static getSimplifiedModule(moduleId: string) {
    return {
      instanceId: `${moduleId}-fallback`,
      moduleId: moduleId,
      style: {
        layout: "compact-list",
        cardStyle: "flat",
        density: "compact",
      },
      data: [],
      error: "ä½¿ç”¨ç®€åŒ–æ¨¡å¼"
    };
  }
}
```

### 13.4 AI å¤„ç†ä½ç½®ï¼ˆæ˜ç¡®åœ¨åç«¯ï¼‰

#### ä¸ºä»€ä¹ˆ AI å¿…é¡»åœ¨åç«¯ï¼Ÿ

**1. å®‰å…¨æ€§**
- API Key ä¸èƒ½æš´éœ²åœ¨å‰ç«¯
- é˜²æ­¢æ»¥ç”¨å’Œç›—ç”¨

**2. æˆæœ¬æ§åˆ¶**
- ç»Ÿä¸€è®¡è´¹å’Œé™æµ
- ç¼“å­˜ AI å“åº”

**3. æ•°æ®éšç§**
- ç”¨æˆ·æ•°æ®ä¸ç»è¿‡ç¬¬ä¸‰æ–¹
- å¯ä»¥åšæ•°æ®è„±æ•

**4. æ€§èƒ½ä¼˜åŒ–**
- æœåŠ¡ç«¯ç¼“å­˜ç»“æœ
- æ‰¹é‡å¤„ç†è¯·æ±‚

#### åç«¯ AI æœåŠ¡æ¶æ„

```typescript
// server/ai/ai-service.ts
export class AIService {
  private client: OpenAI | Anthropic;
  private cache: Cache;
  private rateLimiter: RateLimiter;
  
  async generateExecutionPlan(userInput: string, context?: any) {
    // 1. æ£€æŸ¥ç¼“å­˜
    const cacheKey = this.getCacheKey(userInput, context);
    const cached = await this.cache.get(cacheKey);
    if (cached) return cached;
    
    // 2. æ£€æŸ¥é™æµ
    await this.rateLimiter.check(context.userId);
    
    // 3. å‘é‡æ£€ç´¢æ¨¡å—
    const relevantModules = await this.vectorRetriever.search(userInput);
    
    // 4. æ„å»º Prompt
    const prompt = this.buildPrompt(userInput, relevantModules, context);
    
    // 5. è°ƒç”¨ AI
    const response = await this.client.chat.completions.create({
      model: "gpt-4",
      messages: prompt,
      functions: [this.executionPlanFunction],
      function_call: { name: "generate_execution_plan" }
    });
    
    // 6. è§£ææ‰§è¡Œè®¡åˆ’
    const plan = this.parseResponse(response);
    
    // 7. ç¼“å­˜ç»“æœ
    await this.cache.set(cacheKey, plan, 3600); // ç¼“å­˜1å°æ—¶
    
    return plan;
  }
}
```

### 13.5 æœªè€ƒè™‘åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### é—®é¢˜1ï¼šå¹¶å‘å’Œæ€§èƒ½

**é—®é¢˜ï¼š** å¤šä¸ªæ¨¡å—çš„ initialApi å¹¶è¡Œè°ƒç”¨ï¼Œå¦‚æœæœ‰å‡ åä¸ªæ¨¡å—æ€ä¹ˆåŠï¼Ÿ

**è§£å†³ï¼š**
```typescript
// server/orchestrator/plan-executor.ts
export class PlanExecutor {
  async execute(plan: ExecutionPlan) {
    // åˆ†æ‰¹æ‰§è¡Œï¼Œé¿å…å¹¶å‘è¿‡é«˜
    const batches = this.chunk(plan.modules, 5); // æ¯æ‰¹5ä¸ª
    
    const results = [];
    for (const batch of batches) {
      const batchResults = await Promise.all(
        batch.map(m => this.executeModule(m))
      );
      results.push(...batchResults);
    }
    
    return results;
  }
}
```

#### é—®é¢˜2ï¼šé”™è¯¯å¤„ç†å’Œé‡è¯•

**é—®é¢˜ï¼š** API è°ƒç”¨å¤±è´¥ã€AI è¿”å›æ ¼å¼é”™è¯¯ã€ç½‘ç»œè¶…æ—¶ç­‰

**è§£å†³ï¼š**
```typescript
// server/utils/retry.ts
export async function withRetry<T>(
  fn: () => Promise<T>,
  options = { maxRetries: 3, delay: 1000 }
): Promise<T> {
  for (let i = 0; i < options.maxRetries; i++) {
    try {
      return await fn();
    } catch (error) {
      if (i === options.maxRetries - 1) throw error;
      await sleep(options.delay * (i + 1)); // æŒ‡æ•°é€€é¿
    }
  }
}

// ä½¿ç”¨
const data = await withRetry(() => 
  apiExecutor.execute(apiId, params)
);
```

#### é—®é¢˜3ï¼šç”¨æˆ·åé¦ˆå¾ªç¯

**é—®é¢˜ï¼š** AI é€‰æ‹©çš„æ¨¡å—æˆ–æ ·å¼ä¸ç¬¦åˆç”¨æˆ·æœŸæœ›æ€ä¹ˆåŠï¼Ÿ

**è§£å†³ï¼š**
```typescript
// ç”¨æˆ·å¯ä»¥æä¾›åé¦ˆ
// POST /api/feedback
{
  executionPlanId: "plan-123",
  feedback: {
    moduleId: "flight_search",
    issue: "layout_not_suitable",  // å¸ƒå±€ä¸åˆé€‚
    suggestion: "compact-list"      // ç”¨æˆ·å»ºè®®
  }
}

// åç«¯è®°å½•åé¦ˆï¼Œç”¨äºä¼˜åŒ– AI Prompt
// server/ai/feedback-optimizer.ts
export class FeedbackOptimizer {
  async learn(feedback: Feedback) {
    // è®°å½•ç”¨æˆ·åé¦ˆ
    await this.storage.saveFeedback(feedback);
    
    // è°ƒæ•´ AI å†³ç­–æƒé‡
    await this.adjustWeights(feedback);
  }
}
```

#### é—®é¢˜4ï¼šå®æ—¶æ›´æ–°

**é—®é¢˜ï¼š** æŸäº›æ•°æ®éœ€è¦å®æ—¶æ›´æ–°ï¼ˆå¦‚ä»·æ ¼å˜åŠ¨ã€åº“å­˜å˜åŒ–ï¼‰

**è§£å†³ï¼š**
```typescript
// ä½¿ç”¨ WebSocket æˆ– Server-Sent Events
// server/realtime/price-monitor.ts
export class PriceMonitor {
  watchModule(instanceId: string, apiId: string) {
    // å®šæœŸæ£€æŸ¥æ•°æ®å˜åŒ–
    setInterval(async () => {
      const newData = await this.fetchLatestData(apiId);
      if (this.hasChanged(newData)) {
        // æ¨é€æ›´æ–°åˆ°å‰ç«¯
        this.wsServer.emit(instanceId, {
          type: 'data_update',
          data: newData
        });
      }
    }, 30000); // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡
  }
}

// å‰ç«¯ç›‘å¬
const ws = new WebSocket('ws://server/realtime');
ws.on('data_update', (update) => {
  updateModuleData(update.instanceId, update.data);
});
```

#### é—®é¢˜5ï¼šä¸ªæ€§åŒ–å’Œå­¦ä¹ 

**é—®é¢˜ï¼š** å¦‚ä½•è®©ç³»ç»Ÿè¶Šç”¨è¶Šæ‡‚ç”¨æˆ·ï¼Ÿ

**è§£å†³ï¼š**
```typescript
// server/ai/personalization.ts
export class PersonalizationService {
  async enhanceContext(userId: string, userInput: string) {
    // è·å–ç”¨æˆ·å†å²
    const history = await this.getUserHistory(userId);
    
    // åˆ†æç”¨æˆ·åå¥½
    const preferences = {
      preferredLayout: this.analyzeLayoutPreference(history),
      preferredModules: this.analyzeModuleUsage(history),
      preferredDensity: this.analyzeDensityPreference(history),
    };
    
    // å¢å¼º AI ä¸Šä¸‹æ–‡
    return {
      userInput,
      context: {
        preferences,
        recentModules: history.recentModules,
        deviceType: history.commonDevice,
      }
    };
  }
}
```

#### é—®é¢˜6ï¼šå®‰å…¨æ€§

**é—®é¢˜ï¼š** é˜²æ­¢æ¶æ„è¯·æ±‚ã€æ³¨å…¥æ”»å‡»

**è§£å†³ï¼š**
```typescript
// server/middleware/security.ts
export function securityMiddleware() {
  return [
    // 1. é™æµ
    rateLimit({
      windowMs: 60000,
      max: 10 // æ¯åˆ†é’Ÿæœ€å¤š10æ¬¡è¯·æ±‚
    }),
    
    // 2. è¾“å…¥éªŒè¯
    validate({
      userInput: {
        type: 'string',
        maxLength: 500,  // é™åˆ¶è¾“å…¥é•¿åº¦
        sanitize: true   // æ¸…ç†ç‰¹æ®Šå­—ç¬¦
      }
    }),
    
    // 3. API Key éªŒè¯
    authenticateAPIKey(),
    
    // 4. CSRF ä¿æŠ¤
    csrfProtection()
  ];
}
```

### 13.6 å¼€å‘è°ƒè¯•æ¨¡å¼

```typescript
// server/config.ts
export const devConfig = {
  // å¼€å‘æ¨¡å¼ï¼šæ˜¾ç¤ºè¯¦ç»†æ—¥å¿—
  debug: true,
  
  // AI è°ƒè¯•ï¼šä¿å­˜ AI çš„è¾“å…¥è¾“å‡º
  ai: {
    savePrompts: true,      // ä¿å­˜ Prompt
    saveResponses: true,    // ä¿å­˜å“åº”
    logDir: './logs/ai'
  },
  
  // API è°ƒè¯•ï¼šè®°å½•æ‰€æœ‰ API è°ƒç”¨
  api: {
    logRequests: true,
    logResponses: true,
    logDir: './logs/api'
  },
  
  // Mock æ¨¡å¼ä¸‹çš„å¿«æ·åˆ‡æ¢
  mockOverrides: {
    "flight_search": "real",  // è¿™ä¸ªæ¨¡å—ç”¨çœŸå® API
    "hotel_search": "mock"    // è¿™ä¸ªæ¨¡å—ç”¨ Mock
  }
};
```

---

## åå››ã€æ‰©å±•æ€§è€ƒè™‘

### 14.1 æ–°å¢æ¨¡å—

åªéœ€è¦ï¼š
1. åˆ›å»ºæ¨¡å—é…ç½®æ–‡ä»¶
2. å¦‚æœæ˜¯æ–°å¸ƒå±€ï¼Œåˆ›å»ºå¯¹åº”çš„ Adapter
3. å¦‚æœå¤ç”¨ç°æœ‰å¸ƒå±€ï¼Œç›´æ¥ä½¿ç”¨ç°æœ‰ç»„ä»¶
4. æ·»åŠ  Mock æ•°æ®
5. æ›´æ–°å‘é‡æ•°æ®åº“ç´¢å¼•

### 14.2 æ–°å¢å¸ƒå±€ç±»å‹

1. åˆ›å»ºæ–°çš„ Layout ç»„ä»¶
2. åˆ›å»ºå¯¹åº”çš„ Adapter æ¥å£è§„èŒƒ
3. åœ¨ LayoutRenderer ä¸­æ³¨å†Œ
4. å®ç°å…·ä½“æ¨¡å—çš„ Adapter

### 14.3 æ”¯æŒæ›´å¤š AI æ¨¡å‹

æ‰§è¡Œè®¡åˆ’ç”Ÿæˆå™¨æ”¯æŒåˆ‡æ¢ AI æ¨¡å‹ï¼š
- OpenAI GPT-4
- Anthropic Claude
- æœ¬åœ°å¤§æ¨¡å‹ï¼ˆå¦‚ Llamaï¼‰

åªéœ€è¦é€‚é… Function Calling æ ¼å¼å³å¯ã€‚

### 14.4 å›½é™…åŒ–æ”¯æŒ

æ¨¡å—é…ç½®æ”¯æŒå¤šè¯­è¨€ï¼š
```javascript
{
  name: {
    zh: "æœºç¥¨æœç´¢",
    en: "Flight Search"
  },
  description: {
    zh: "æœç´¢å’Œé¢„è®¢èˆªç­",
    en: "Search and book flights"
  }
}
```

---

## åäº”ã€æ€»ç»“

æœ¬æ¶æ„é€šè¿‡**æ™ºèƒ½åŒ– + æ¨¡å—åŒ–è®¾è®¡**å®ç°äº†ï¼š

1. **AI æ™ºèƒ½å†³ç­–ï¼š** ä¸ä»…é€‰æ‹©åŠŸèƒ½æ¨¡å—ï¼Œè¿˜å†³å®šå±•ç¤ºæ ·å¼ã€å¸ƒå±€æ–¹å¼ï¼Œå®ç°çœŸæ­£çš„æ™ºèƒ½åŒ–ç•Œé¢
2. **å‘é‡æ£€ç´¢ï¼š** ç›´æ¥ä»æ‰€æœ‰æ¨¡å—ä¸­æ£€ç´¢ï¼Œæ— éœ€äººä¸ºåˆ†ç±»ï¼ŒAI è‡ªä¸»å†³ç­–
3. **ä»£ç é«˜å¤ç”¨ï¼š** ç»„ä»¶å¤ç”¨å‡å°‘é‡å¤ï¼Œé€‚é…å™¨å¤„ç†å·®å¼‚ï¼Œå¤§å¹…å‡å°‘ä»£ç é‡
4. **æ ·å¼æ™ºèƒ½åŒ–ï¼š** AI æ ¹æ®ç”¨æˆ·æ„å›¾åŠ¨æ€é€‰æ‹©æœ€åˆé€‚çš„å¸ƒå±€ã€ä¸»é¢˜ã€å¯†åº¦
5. **å‰åç«¯åˆ†ç¦»ï¼š** æ¸…æ™°çš„ç›®å½•ç»“æ„ï¼ŒèŒè´£æ˜ç¡®ï¼ŒAI å¤„ç†åœ¨åç«¯
6. **å®Œå…¨ Mock æ”¯æŒï¼š** åŒ…æ‹¬ AI Mock å’Œ API Mockï¼Œæ— éœ€çœŸå®æœåŠ¡å³å¯å¼€å‘
7. **å®¹é”™å’Œé™çº§ï¼š** å‰ç«¯ä¸å®Œå…¨ä¾èµ–åç«¯ï¼Œæœ‰å®Œå–„çš„é”™è¯¯å¤„ç†
8. **å¡ç‰‡å¼å¸ƒå±€ï¼š** ä¼˜å…ˆçº§å±•ç¤ºï¼Œå±•å¼€/æŠ˜å ï¼Œæµç•…äº¤äº’

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**
- âœ… AI ä¸€æ¬¡æ€§å†³ç­–ï¼ˆåŠŸèƒ½ + æ ·å¼ï¼‰ï¼Œæ— éœ€å¤šè½®å¯¹è¯
- âœ… AI å¤„ç†åœ¨åç«¯ï¼ˆå®‰å…¨ã€æˆæœ¬å¯æ§ã€å¯ç¼“å­˜ï¼‰
- âœ… æ™ºèƒ½å‘é‡æ£€ç´¢ï¼Œæ— éœ€äººå·¥åˆ†ç±»
- âœ… AI æ§åˆ¶æ ·å¼ï¼Œæ ¹æ®åœºæ™¯è‡ªé€‚åº”
- âœ… å‰ç«¯æœ‰å®¹é”™èƒ½åŠ›ï¼Œä¸å®Œå…¨ä¾èµ–åç«¯
- âœ… å®Œæ•´çš„ Mock æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ AI Mock
- âœ… æ¨¡å—åŒ–è®¾è®¡ï¼Œé«˜åº¦å¯å¤ç”¨
- âœ… å‰åç«¯åˆ†ç¦»ï¼Œæ¶æ„æ¸…æ™°
- âœ… è€ƒè™‘äº†æ€§èƒ½ã€å®‰å…¨ã€é”™è¯¯å¤„ç†ç­‰å®é™…é—®é¢˜

**å…³é”®åˆ›æ–°ç‚¹ï¼š**
1. **å»åˆ†ç±»åŒ–ï¼š** AI ç›´æ¥ä»å…¨éƒ¨æ¨¡å—ä¸­æ™ºèƒ½æ£€ç´¢ï¼Œè€Œéé¢„è®¾åˆ†ç±»
2. **æ ·å¼æ™ºèƒ½åŒ–ï¼š** AI ä¸ä»…å†³å®š"å±•ç¤ºä»€ä¹ˆ"ï¼Œè¿˜å†³å®š"å¦‚ä½•å±•ç¤º"
3. **ä¸€æ¬¡æ€§ç¼–æ’ï¼š** æ‰€æœ‰å†³ç­–ï¼ˆæ¨¡å—ã€APIã€æ ·å¼ï¼‰ä¸€æ¬¡å®Œæˆ
4. **å®Œå…¨é…ç½®é©±åŠ¨ï¼š** æ–°å¢åŠŸèƒ½åªéœ€æ·»åŠ é…ç½®ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç 
5. **AI Mock æœºåˆ¶ï¼š** é€šè¿‡ç®€å•è§„åˆ™æ¨¡æ‹Ÿ AI å†³ç­–ï¼Œä¾¿äºå¼€å‘è°ƒè¯•
6. **å‰ç«¯æ™ºèƒ½é™çº§ï¼š** åç«¯å¤±è´¥æ—¶å‰ç«¯ä»èƒ½å·¥ä½œ

**æ˜ç¡®å›ç­”å®ç°é—®é¢˜ï¼š**

**Q1: å…¶ä»– AI èƒ½æ ¹æ®è¿™ä¸ªæ–‡æ¡£å‡†ç¡®å®ç°å—ï¼Ÿ**
A: å¯ä»¥ã€‚æ–‡æ¡£åŒ…å«äº†ï¼š
- å®Œæ•´çš„æ¶æ„è®¾è®¡å’Œç†å¿µ
- è¯¦ç»†çš„å‰åç«¯äº¤äº’åè®®
- å…·ä½“çš„æ•°æ®ç»“æ„å®šä¹‰
- Mock å®ç°æ–¹æ¡ˆ
- é”™è¯¯å¤„ç†å’Œå®¹é”™æœºåˆ¶
- ç›®å½•ç»“æ„å’ŒèŒè´£åˆ’åˆ†

**Q2: åç«¯å®Œå…¨ç”¨æ¨¡æ‹Ÿèƒ½å®ç°å—ï¼Ÿ**
A: å¯ä»¥ã€‚é€šè¿‡ä¸¤å±‚ Mockï¼š
- AI Mockï¼šç”¨å…³é”®è¯åŒ¹é…æ¨¡æ‹Ÿ AI çš„æ¨¡å—é€‰æ‹©å’Œæ ·å¼å†³ç­–
- API Mockï¼šç”¨ JSON æ–‡ä»¶æ¨¡æ‹Ÿ API è¿”å›æ•°æ®
- æ”¯æŒåŠ¨æ€å‚æ•°æ›¿æ¢å’Œå»¶è¿Ÿæ¨¡æ‹Ÿ

**Q3: å‰ç«¯å®Œå…¨ä¾èµ–åç«¯å—ï¼Ÿ**
A: ä¸å®Œå…¨ä¾èµ–ã€‚å‰ç«¯æœ‰ï¼š
- é”™è¯¯çŠ¶æ€å¤„ç†å’Œé‡è¯•æœºåˆ¶
- åŠ è½½éª¨æ¶å±
- æ ·å¼é™çº§æ–¹æ¡ˆ
- æ¨¡å—åŠ è½½å¤±è´¥çš„å ä½ç¬¦

**Q4: AI åœ¨åç«¯å¤„ç†å—ï¼Ÿ**
A: æ˜¯çš„ï¼Œå¿…é¡»åœ¨åç«¯ï¼ŒåŸå› ï¼š
- ä¿æŠ¤ API Key å®‰å…¨
- æ§åˆ¶æˆæœ¬å’Œé™æµ
- ç¼“å­˜ AI å“åº”
- æ•°æ®éšç§ä¿æŠ¤

**Q5: è€ƒè™‘äº†å“ªäº›é¢å¤–é—®é¢˜ï¼Ÿ**
A: åŒ…æ‹¬ä½†ä¸é™äºï¼š
- å¹¶å‘æ€§èƒ½å’Œæ‰¹é‡å¤„ç†
- é”™è¯¯é‡è¯•å’ŒæŒ‡æ•°é€€é¿
- ç”¨æˆ·åé¦ˆå’ŒæŒç»­ä¼˜åŒ–
- å®æ—¶æ•°æ®æ›´æ–°ï¼ˆWebSocketï¼‰
- ä¸ªæ€§åŒ–å’Œå­¦ä¹ èƒ½åŠ›
- å®‰å…¨é˜²æŠ¤ï¼ˆé™æµã€éªŒè¯ã€CSRFï¼‰
- å¼€å‘è°ƒè¯•æ¨¡å¼

**å¼€å§‹å®ç°æ—¶ï¼Œè¯·éµå¾ªæœ¬æ–‡æ¡£çš„æ¶æ„è®¾è®¡ï¼Œç‰¹åˆ«æ³¨æ„ï¼š**
- AI çš„å®Œå…¨å†³ç­–æƒï¼ˆåŠŸèƒ½ + æ ·å¼ï¼‰
- AI å¤„ç†å¿…é¡»åœ¨åç«¯
- å‰ç«¯çš„å®¹é”™å’Œé™çº§èƒ½åŠ›
- å‘é‡æ£€ç´¢çš„ç›´æ¥æ€§ï¼ˆæ— éœ€åˆ†ç±»å±‚ï¼‰
- å®Œæ•´çš„ Mock æ”¯æŒï¼ˆAI + APIï¼‰
- å‰åç«¯çš„æ˜ç¡®åˆ†ç¦»
- æ ·å¼ç³»ç»Ÿçš„å¯æ‰©å±•æ€§
- æ€§èƒ½å’Œå®‰å…¨çš„è€ƒè™‘

